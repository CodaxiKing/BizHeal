"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@gilbarbara+hooks@0.8.2_react@19.1.1";
exports.ids = ["vendor-chunks/@gilbarbara+hooks@0.8.2_react@19.1.1"];
exports.modules = {

/***/ "(ssr)/../../node_modules/.pnpm/@gilbarbara+hooks@0.8.2_react@19.1.1/node_modules/@gilbarbara/hooks/dist/index.mjs":
/*!*******************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@gilbarbara+hooks@0.8.2_react@19.1.1/node_modules/@gilbarbara/hooks/dist/index.mjs ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   USE_FETCH_STATUS: () => (/* binding */ USE_FETCH_STATUS),\n/* harmony export */   useClickOutside: () => (/* binding */ useClickOutside),\n/* harmony export */   useDebounce: () => (/* binding */ useDebounce),\n/* harmony export */   useDeepCompareEffect: () => (/* binding */ useDeepCompareEffect),\n/* harmony export */   useEffectOnce: () => (/* binding */ useEffectOnce),\n/* harmony export */   useFetch: () => (/* binding */ useFetch),\n/* harmony export */   useIntersectionObserver: () => (/* binding */ useIntersectionObserver),\n/* harmony export */   useInterval: () => (/* binding */ useInterval),\n/* harmony export */   useIsFirstMount: () => (/* binding */ useIsFirstMount),\n/* harmony export */   useIsMounted: () => (/* binding */ useIsMounted),\n/* harmony export */   useIsomorphicLayoutEffect: () => (/* binding */ useIsomorphicLayoutEffect),\n/* harmony export */   useLatest: () => (/* binding */ useLatest),\n/* harmony export */   useLifecycles: () => (/* binding */ useLifecycles),\n/* harmony export */   useLocalStorage: () => (/* binding */ useLocalStorage),\n/* harmony export */   useLocalStorageState: () => (/* binding */ useLocalStorageState),\n/* harmony export */   useLocation: () => (/* binding */ useLocation),\n/* harmony export */   useMeasure: () => (/* binding */ useMeasure),\n/* harmony export */   useMediaQuery: () => (/* binding */ useMediaQuery),\n/* harmony export */   useMergeRefs: () => (/* binding */ useMergeRefs),\n/* harmony export */   useMount: () => (/* binding */ useMount),\n/* harmony export */   usePrevious: () => (/* binding */ usePrevious),\n/* harmony export */   useRenderCount: () => (/* binding */ useRenderCount),\n/* harmony export */   useResizeObserver: () => (/* binding */ useResizeObserver),\n/* harmony export */   useResponsive: () => (/* binding */ useResponsive),\n/* harmony export */   useScript: () => (/* binding */ useScript),\n/* harmony export */   useSetState: () => (/* binding */ useSetState),\n/* harmony export */   useSingleton: () => (/* binding */ useSingleton),\n/* harmony export */   useStableValue: () => (/* binding */ useStableValue),\n/* harmony export */   useThrottle: () => (/* binding */ useThrottle),\n/* harmony export */   useThrottleValue: () => (/* binding */ useThrottleValue),\n/* harmony export */   useTimeout: () => (/* binding */ useTimeout),\n/* harmony export */   useToggle: () => (/* binding */ useToggle),\n/* harmony export */   useUnmount: () => (/* binding */ useUnmount),\n/* harmony export */   useUpdate: () => (/* binding */ useUpdate),\n/* harmony export */   useUpdateEffect: () => (/* binding */ useUpdateEffect),\n/* harmony export */   useWhyDidYouUpdate: () => (/* binding */ useWhyDidYouUpdate),\n/* harmony export */   useWindowSize: () => (/* binding */ useWindowSize)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/../../node_modules/.pnpm/next@15.5.3_@babel+core@7.28.4_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _gilbarbara_deep_equal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @gilbarbara/deep-equal */ \"(ssr)/../../node_modules/.pnpm/@gilbarbara+deep-equal@0.3.1/node_modules/@gilbarbara/deep-equal/dist/index.mjs\");\n// src/useClickOutside.ts\n\n\n// src/useStableValue.ts\n\n\n// src/useDeepCompareEffect.ts\n\n\n\n// src/utils.ts\nfunction canUseDOM() {\n  return !!(typeof window !== \"undefined\" && window.document && window.document.createElement);\n}\nfunction getElement(target) {\n  if (!canUseDOM()) {\n    return null;\n  }\n  let targetEl;\n  if (typeof target === \"string\") {\n    targetEl = document.querySelector(target);\n  } else {\n    targetEl = target && \"current\" in target ? target.current : target;\n  }\n  return targetEl;\n}\nfunction isPlainObject(value) {\n  if (Object.prototype.toString.call(value) !== \"[object Object]\") {\n    return false;\n  }\n  const prototype = Object.getPrototypeOf(value);\n  return prototype === null || prototype === Object.getPrototypeOf({});\n}\nfunction isPrimitive(value) {\n  return value !== Object(value);\n}\nfunction isString(value) {\n  return typeof value === \"string\";\n}\nfunction isURL(value) {\n  if (!isString(value)) {\n    return false;\n  }\n  try {\n    new URL(value);\n    return true;\n  } catch {\n    return false;\n  }\n}\nfunction noop() {\n  return void 0;\n}\nfunction on(target, ...rest) {\n  if (target && target.addEventListener) {\n    target.addEventListener(...rest);\n  }\n}\nfunction off(target, ...rest) {\n  if (target && target.removeEventListener) {\n    target.removeEventListener(...rest);\n  }\n}\n\n// src/useDeepCompareEffect.ts\nfunction useDeepCompareEffect(effect, dependencies) {\n  if (true) {\n    if (!(dependencies instanceof Array) || !dependencies.length) {\n      console.warn(\n        \"`useDeepCompareEffect` should not be used with no dependencies. Use React.useEffect instead.\"\n      );\n    }\n    if (dependencies.length && dependencies.every(isPrimitive)) {\n      console.warn(\n        \"`useDeepCompareEffect` should not be used with dependencies that are all primitive values. Use React.useEffect instead.\"\n      );\n    }\n  }\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(void 0);\n  if (!ref.current || !(0,_gilbarbara_deep_equal__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(dependencies, ref.current)) {\n    ref.current = dependencies;\n  }\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(effect, ref.current);\n}\n\n// src/useIsFirstMount.ts\n\nfunction useIsFirstMount() {\n  const isFirstMount = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(true);\n  if (isFirstMount.current) {\n    isFirstMount.current = false;\n    return true;\n  }\n  return isFirstMount.current;\n}\n\n// src/useStableValue.ts\nfunction useStableValue(value) {\n  const [stableValue, setStableValue] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => value);\n  const isFirstMount = useIsFirstMount();\n  useDeepCompareEffect(() => {\n    if (isFirstMount) {\n      return;\n    }\n    setStableValue(() => value);\n  }, [value]);\n  return stableValue;\n}\n\n// src/useClickOutside.ts\nfunction useClickOutside(callback) {\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const stableCallback = useStableValue(callback);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const handleClick = (event) => {\n      if (!ref.current?.contains(event.target)) {\n        stableCallback();\n      }\n    };\n    on(document, \"click\", handleClick);\n    return () => {\n      off(document, \"click\", handleClick);\n    };\n  }, [stableCallback]);\n  return ref;\n}\n\n// src/useDebounce.ts\n\nfunction useDebounce(callback, delayMs = 250, deps = []) {\n  const status = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(\"pending\");\n  const timeout = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const savedCallback = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(callback);\n  const isFirstMount = useIsFirstMount();\n  const clear = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    status.current = \"cancelled\";\n    timeout.current && clearTimeout(timeout.current);\n  }, []);\n  const set = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    status.current = \"pending\";\n    timeout.current && clearTimeout(timeout.current);\n    timeout.current = setTimeout(() => {\n      status.current = \"completed\";\n      savedCallback.current();\n    }, delayMs);\n  }, [delayMs]);\n  const getStatus = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => status.current, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n  useDeepCompareEffect(() => {\n    if (!isFirstMount) {\n      set();\n      return clear;\n    }\n    return void 0;\n  }, [set, clear, deps, delayMs]);\n  return { cancel: clear, getStatus };\n}\n\n// src/useEffectOnce.ts\n\nfunction useEffectOnce(effect) {\n  const destroyFn = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const effectCalled = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n  const effectFn = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(effect);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!effectCalled.current) {\n      destroyFn.current = effectFn.current();\n      effectCalled.current = true;\n    }\n    return () => {\n      if (destroyFn.current) {\n        destroyFn.current();\n        destroyFn.current = null;\n      }\n    };\n  }, []);\n}\n\n// src/useFetch.tsx\n\nvar USE_FETCH_STATUS = {\n  IDLE: \"IDLE\",\n  LOADING: \"LOADING\",\n  SUCCESS: \"SUCCESS\",\n  ERROR: \"ERROR\"\n};\nasync function request(options) {\n  const {\n    body = void 0,\n    headers = {},\n    method = \"GET\",\n    mode = \"cors\",\n    type = \"json\",\n    url = \"\"\n  } = options;\n  const contentTypes = {\n    json: \"application/json\",\n    urlencoded: \"application/x-www-form-urlencoded\"\n  };\n  const params = {\n    body: void 0,\n    cache: \"no-store\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": contentTypes[type],\n      ...headers\n    },\n    method,\n    mode,\n    credentials: void 0\n  };\n  if (body) {\n    params.body = isPlainObject(body) && type === \"json\" ? JSON.stringify(body) : body;\n  }\n  return fetch(url, params).then(async (response) => {\n    const text = await response.text();\n    let content;\n    try {\n      content = JSON.parse(text);\n    } catch {\n      content = text;\n    }\n    if (response.status > 299) {\n      const error = new Error(response.statusText);\n      error.status = response.status;\n      error.response = content;\n      throw error;\n    }\n    return content;\n  });\n}\nfunction useFetch(urlOrOptions) {\n  const isActive = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n  const retryCount = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0);\n  const [{ data, error, status }, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    data: void 0,\n    error: void 0,\n    status: USE_FETCH_STATUS.IDLE\n  });\n  const {\n    retry = 0,\n    retryDelay = (attempt) => attempt * 1e3,\n    wait = false,\n    ...options\n  } = isURL(urlOrOptions) ? {\n    type: \"json\",\n    url: urlOrOptions\n  } : urlOrOptions;\n  if (!isPlainObject(options) || !isURL(options.url)) {\n    throw new Error(\"Expected an options object or URL\");\n  }\n  const getData = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (eraseData) => {\n      setState((s) => ({\n        ...s,\n        data: eraseData ? void 0 : s.data,\n        error: void 0,\n        status: USE_FETCH_STATUS.LOADING\n      }));\n      request(options).then((response) => {\n        if (isActive.current) {\n          setState((s) => ({\n            ...s,\n            data: response,\n            status: USE_FETCH_STATUS.SUCCESS\n          }));\n        }\n      }).catch((responseError) => {\n        if (isActive.current) {\n          setState((s) => ({\n            ...s,\n            error: responseError,\n            status: USE_FETCH_STATUS.ERROR\n          }));\n        }\n        if (retry && retryCount.current < retry) {\n          retryCount.current += 1;\n          setTimeout(\n            getData,\n            typeof retryDelay === \"function\" ? retryDelay(retryCount.current) : retryDelay\n          );\n        }\n      });\n    },\n    [options, retry, retryDelay]\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    isActive.current = true;\n    return () => {\n      isActive.current = false;\n    };\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (status === USE_FETCH_STATUS.IDLE && !wait) {\n      getData();\n    }\n  }, [getData, status, wait]);\n  const isError = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => status === USE_FETCH_STATUS.ERROR, [status]);\n  const isFetched = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    () => [USE_FETCH_STATUS.SUCCESS, USE_FETCH_STATUS.ERROR].includes(status),\n    [status]\n  );\n  const isLoading = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => status === USE_FETCH_STATUS.LOADING, [status]);\n  const isPaused = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => status === USE_FETCH_STATUS.IDLE && wait, [status, wait]);\n  const isSuccess = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => status === USE_FETCH_STATUS.SUCCESS, [status]);\n  const refetch = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((eraseData = false) => getData(eraseData), [getData]);\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => ({\n      data,\n      error,\n      isError,\n      isFetched,\n      isLoading,\n      isPaused,\n      isSuccess,\n      refetch,\n      status\n    }),\n    [data, error, isError, isFetched, isLoading, isPaused, isSuccess, refetch, status]\n  );\n}\n\n// src/useIntersectionObserver.ts\n\nfunction useIntersectionObserver(target, options) {\n  const { delay = 0, once = false, root = null, rootMargin = \"0%\", threshold = 0 } = options || {};\n  const [value, setValue] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const disabled = value?.isIntersecting && once;\n  const observer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    if (!canUseDOM()) {\n      return {};\n    }\n    return new IntersectionObserver(\n      ([entry]) => {\n        if (delay) {\n          setTimeout(() => setValue(entry), delay);\n          return;\n        }\n        setValue(entry);\n      },\n      { threshold, root, rootMargin }\n    );\n  }, [delay, root, rootMargin, threshold]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!canUseDOM() || !(observer instanceof IntersectionObserver) || disabled) {\n      return () => void 0;\n    }\n    const element = getElement(target);\n    if (!element) {\n      return () => void 0;\n    }\n    observer.observe(element);\n    return () => observer.disconnect();\n  }, [target, root, rootMargin, disabled, observer]);\n  return value;\n}\n\n// src/useInterval.ts\n\nfunction useInterval(callback, delayMs = 100) {\n  const savedCallback = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(callback);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    savedCallback.current = callback;\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (delayMs !== null) {\n      const interval = setInterval(() => savedCallback.current(), delayMs);\n      return () => {\n        clearInterval(interval);\n      };\n    }\n    return void 0;\n  }, [delayMs]);\n}\n\n// src/useIsMounted.ts\n\nfunction useIsMounted() {\n  const isMounted = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => isMounted.current, []);\n}\n\n// src/useIsomorphicLayoutEffect.ts\n\nvar useIsomorphicLayoutEffect = canUseDOM() ? react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect : react__WEBPACK_IMPORTED_MODULE_0__.useEffect;\n\n// src/useLatest.ts\n\nfunction useLatest(value) {\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(value);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    ref.current = value;\n  });\n  return ref;\n}\n\n// src/useLifecycles.ts\n\nfunction useLifecycles(mount, unmount) {\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    mount();\n    return unmount;\n  }, []);\n}\n\n// src/useLocalStorage.ts\n\nfunction useLocalStorageHook(key, initialValue, options) {\n  if (!key) {\n    throw new Error('useLocalStorage: \"key\" is required');\n  }\n  const deserializer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => options?.raw ? (value) => value : options?.deserializer ?? JSON.parse,\n    [options]\n  );\n  const serializer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => options?.raw ? String : options?.serializer ?? JSON.stringify,\n    [options]\n  );\n  const initializer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)((k) => {\n    try {\n      const localStorageValue = localStorage.getItem(k);\n      if (localStorageValue !== null) {\n        return deserializer(localStorageValue);\n      }\n      initialValue && localStorage.setItem(k, serializer(initialValue));\n      return initialValue;\n    } catch {\n      return initialValue;\n    }\n  });\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => initializer.current(key));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)(() => setState(initializer.current(key)), [key]);\n  const set = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (patch) => {\n      try {\n        const newState = patch instanceof Function ? patch(state) : patch;\n        if (typeof newState === \"undefined\") {\n          return;\n        }\n        let value;\n        if (options) {\n          if (options.raw) {\n            value = typeof newState === \"string\" ? newState : JSON.stringify(newState);\n          } else if (options?.serializer) {\n            value = options.serializer(newState);\n          } else {\n            value = JSON.stringify(newState);\n          }\n        } else {\n          value = JSON.stringify(newState);\n        }\n        localStorage.setItem(key, value);\n        setState(deserializer(value));\n      } catch {\n      }\n    },\n    [deserializer, key, options, state]\n  );\n  const remove = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    try {\n      localStorage.removeItem(key);\n      setState(void 0);\n    } catch {\n    }\n  }, [key, setState]);\n  return [state, set, remove];\n}\nfunction useLocalStorageSSR(_key, initialValue, _options) {\n  return [initialValue, noop, noop];\n}\nvar useLocalStorage = canUseDOM() ? useLocalStorageHook : useLocalStorageSSR;\n\n// src/useSetState.ts\n\nfunction useSetState(initialState = {}) {\n  const [state, set] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(initialState);\n  const setState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((patch) => {\n    set((previousState) => ({\n      ...previousState,\n      ...patch instanceof Function ? patch(previousState) : patch\n    }));\n  }, []);\n  return [state, setState];\n}\n\n// src/useLocalStorageState.ts\nfunction getState(initialState, savedState, shouldOverride, restoreProperties) {\n  if (shouldOverride) {\n    const initialStateKeys = Object.keys(initialState);\n    const savedStateKeys = savedState ? Object.keys(savedState) : [];\n    const restorePropertiesKeys = restoreProperties ? Object.keys(restoreProperties) : [];\n    if (![...initialStateKeys, ...restorePropertiesKeys].every((k) => savedStateKeys.includes(k))) {\n      return { ...initialState, ...restoreProperties };\n    }\n    return { ...savedState, ...restoreProperties };\n  }\n  return { ...savedState, ...restoreProperties };\n}\nfunction useLocalStorageState(key, initialState, options) {\n  const { overrideDivergentSavedState = false, resetProperties } = options || {};\n  const [value, setValue, remove] = useLocalStorage(key, initialState);\n  const [state, setState] = useSetState(\n    getState(initialState, value, overrideDivergentSavedState, resetProperties)\n  );\n  useDeepCompareEffect(() => {\n    setValue(state);\n  }, [setValue, state]);\n  return [state, setState, remove];\n}\n\n// src/useLocation.ts\nfunction useLocation() {\n  const { hash, host, hostname, href, origin, pathname, port, protocol, search } = window.location;\n  const query = search ? search.slice(1).split(\"&\").reduce((acc, pair) => {\n    const [key, value] = pair.split(\"=\");\n    if (key && value) {\n      acc[key] = value;\n    }\n    return acc;\n  }, {}) : {};\n  return { hash, host, hostname, href, origin, pathname, port, protocol, query, search };\n}\n\n// src/useMeasure.tsx\n\n\n// src/defaults.ts\nvar defaultElementDimensions = {\n  absoluteHeight: 0,\n  absoluteWidth: 0,\n  bottom: 0,\n  height: 0,\n  left: 0,\n  right: 0,\n  top: 0,\n  width: 0,\n  x: 0,\n  y: 0\n};\n\n// src/useResizeObserver.ts\n\nfunction useResizeObserver(target, debounce = 0) {\n  const [element, setElement] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(getElement(target));\n  const [value, setValue] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n  const timeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const isFirstCall = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(true);\n  const observer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    if (!canUseDOM()) {\n      return {};\n    }\n    return new window.ResizeObserver((entries) => {\n      if (debounce && !isFirstCall.current) {\n        if (timeoutRef.current) {\n          window.clearTimeout(timeoutRef.current);\n        }\n        timeoutRef.current = window.setTimeout(() => {\n          setValue(entries[0]);\n        }, debounce);\n        return;\n      }\n      setValue(entries[0]);\n      isFirstCall.current = false;\n    });\n  }, [debounce]);\n  useIsomorphicLayoutEffect(() => {\n    setElement(getElement(target));\n  }, [target]);\n  useIsomorphicLayoutEffect(() => {\n    if (!canUseDOM() || !(observer instanceof ResizeObserver)) {\n      return () => void 0;\n    }\n    if (!element) {\n      return () => void 0;\n    }\n    observer.observe(element);\n    return () => {\n      observer.disconnect();\n    };\n  }, [element, observer]);\n  return value;\n}\n\n// src/useMeasure.tsx\nfunction parseFloatValue(value) {\n  const parsed = parseFloat(value);\n  return Number.isNaN(parsed) ? 0 : parsed;\n}\nfunction getElementMeasure(element) {\n  if (!canUseDOM() || !element) {\n    return defaultElementDimensions;\n  }\n  const { bottom, height, left, right, top, width, x, y } = element.getBoundingClientRect();\n  const {\n    borderBottom,\n    borderLeft,\n    borderRight,\n    borderTop,\n    paddingBottom,\n    paddingLeft,\n    paddingRight,\n    paddingTop\n  } = getComputedStyle(element);\n  return {\n    absoluteHeight: height - parseFloatValue(paddingTop) - parseFloatValue(paddingBottom) - parseFloatValue(borderTop) - parseFloatValue(borderBottom),\n    absoluteWidth: width - parseFloatValue(paddingLeft) - parseFloatValue(paddingRight) - parseFloatValue(borderLeft) - parseFloatValue(borderRight),\n    bottom,\n    height,\n    left,\n    right,\n    top,\n    width,\n    x,\n    y\n  };\n}\nfunction useMeasure(target, debounce = 0) {\n  const [element, setElement] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(getElement(target));\n  const [dimensions, setDimensions] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(getElementMeasure(element));\n  const entry = useResizeObserver(element, debounce);\n  useIsomorphicLayoutEffect(() => {\n    const nextElement = getElement(target);\n    setElement(nextElement);\n    setDimensions(getElementMeasure(nextElement));\n  }, [target]);\n  useIsomorphicLayoutEffect(() => {\n    if (!entry) {\n      return;\n    }\n    const { bottom, height, left, right, top, width, x, y } = entry.contentRect;\n    const { blockSize, inlineSize } = entry.borderBoxSize[0];\n    setDimensions({\n      absoluteHeight: blockSize,\n      absoluteWidth: inlineSize,\n      bottom,\n      height,\n      left,\n      right,\n      top,\n      width,\n      x,\n      y\n    });\n  }, [entry]);\n  return dimensions;\n}\n\n// src/useMediaQuery.ts\n\nfunction useMediaQuery(input) {\n  const getMatches = (query) => {\n    if (!canUseDOM()) {\n      return false;\n    }\n    return window.matchMedia(query).matches;\n  };\n  const [matches, setMatches] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(getMatches(input));\n  function handleChange() {\n    setMatches(getMatches(input));\n  }\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const matchMedia = window.matchMedia(input);\n    handleChange();\n    try {\n      matchMedia.addEventListener(\"change\", handleChange);\n    } catch {\n      matchMedia.addListener(handleChange);\n    }\n    return () => {\n      try {\n        matchMedia.removeEventListener(\"change\", handleChange);\n      } catch {\n        matchMedia.removeListener(handleChange);\n      }\n    };\n  }, [input]);\n  return matches;\n}\n\n// src/useMergeRefs.tsx\n\nfunction useMergeRefs(...refs) {\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n    (value) => {\n      for (const ref of refs) {\n        if (typeof ref === \"function\") {\n          ref(value);\n        } else if (ref && typeof ref === \"object\") {\n          ref.current = value;\n        }\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    refs\n  );\n}\n\n// src/useMount.ts\nfunction useMount(fn) {\n  useEffectOnce(() => {\n    fn();\n  });\n}\n\n// src/usePrevious.ts\n\nfunction usePrevious(state) {\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    ref.current = state;\n  });\n  return ref.current;\n}\n\n// src/useRenderCount.tsx\n\nfunction useRenderCount(name) {\n  const count = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(1);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    count.current += 1;\n  });\n  console.log(\n    `%c${name || \"RenderCount\"}: %c${count.current}`,\n    \"font-size: 14px;  font-weight: bold;\",\n    \"color: #999; font-size: 14px;\"\n  );\n  return count.current;\n}\n\n// src/useResponsive.tsx\n\nvar defaultBreakpoints = { xs: 0, sm: 400, md: 768, lg: 1024, xl: 1280 };\nfunction useResponsiveBase(breakpoints, initialWidth = Infinity, initialHeight = Infinity) {\n  const sizes = Object.entries(breakpoints).sort(([, aSize], [, bSize]) => bSize - aSize);\n  const smallestBreakpoint = sizes[sizes.length - 1];\n  if (smallestBreakpoint[1] !== 0) {\n    if (true) {\n      console.warn(`The \"${smallestBreakpoint[0]}\" breakpoint should be 0`);\n    }\n    smallestBreakpoint[1] = 0;\n  }\n  const getScreen = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    const height = canUseDOM() ? window.innerHeight : initialHeight;\n    const width = canUseDOM() ? window.innerWidth : initialWidth;\n    const size = sizes.find(([, s]) => s <= width) || sizes[0];\n    const orientation = width > height ? \"landscape\" : \"portrait\";\n    return {\n      between(min, max, andOrientation) {\n        return width >= breakpoints[min] && width < breakpoints[max] && (!andOrientation || andOrientation === orientation);\n      },\n      min(breakpoint, andOrientation) {\n        return width >= breakpoints[breakpoint] && (!andOrientation || andOrientation === orientation);\n      },\n      max(breakpoint, andOrientation) {\n        return width < breakpoints[breakpoint] && (!andOrientation || andOrientation === orientation);\n      },\n      orientation,\n      size: size[0]\n    };\n  }, [breakpoints, initialHeight, initialWidth, sizes]);\n  const [screen, setScreen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(getScreen());\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const onResize = () => {\n      const current = getScreen();\n      if (current.size !== screen.size || current.orientation !== screen.orientation) {\n        setScreen(current);\n      }\n    };\n    on(window, \"resize\", onResize);\n    return () => {\n      off(window, \"resize\", onResize);\n    };\n  }, [getScreen, screen, setScreen]);\n  return screen;\n}\nfunction useResponsive(breakpoints, initialWidth, initialHeight) {\n  return useResponsiveBase(breakpoints || defaultBreakpoints, initialWidth, initialHeight);\n}\n\n// src/useScript.tsx\n\nfunction useScript(src, idOrOptions = {}) {\n  const options = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => isString(idOrOptions) ? { id: idOrOptions } : idOrOptions,\n    [idOrOptions]\n  );\n  const script = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    loaded: false,\n    error: false\n  });\n  const onLoad = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    setState({\n      loaded: true,\n      error: false\n    });\n  }, []);\n  const onError = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    if (script.current) {\n      script.current.remove();\n    }\n    setState({\n      loaded: false,\n      error: true\n    });\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(\n    () => {\n      if (!canUseDOM() || script.current) {\n        return void 0;\n      }\n      const element = document.createElement(\"script\");\n      element.async = options.async ?? true;\n      element.defer = options.defer ?? false;\n      element.type = options.type || \"text/javascript\";\n      element.id = options.id || src;\n      element.src = src;\n      script.current = element;\n      const { current } = script;\n      on(current, \"load\", onLoad);\n      on(current, \"error\", onError);\n      document.body.appendChild(current);\n      return () => {\n        off(current, \"load\", onLoad);\n        off(current, \"error\", onError);\n      };\n    },\n    [onError, onLoad, options, src]\n    // Only re-run effect if script src changes\n  );\n  return [state.loaded, state.error];\n}\n\n// src/useSingleton.tsx\n\nfunction useSingleton(callback) {\n  const hasBeenCalled = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n  if (hasBeenCalled.current) {\n    return;\n  }\n  callback();\n  hasBeenCalled.current = true;\n}\n\n// src/useTimeout.ts\n\nfunction useTimeout(callback, delayMs = 0) {\n  const status = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(\"pending\");\n  const timeout = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const savedCallback = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(callback);\n  const clear = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    status.current = \"cancelled\";\n    timeout.current && clearTimeout(timeout.current);\n  }, []);\n  const set = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    status.current = \"pending\";\n    timeout.current && clearTimeout(timeout.current);\n    timeout.current = setTimeout(() => {\n      status.current = \"completed\";\n      savedCallback.current();\n    }, delayMs);\n  }, [delayMs]);\n  const getStatus = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => status.current, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    set();\n    return clear;\n  }, [set, clear]);\n  return { cancel: clear, getStatus, reset: set };\n}\n\n// src/useThrottle.ts\n\n\n// src/useUnmount.ts\nfunction useUnmount(fn) {\n  const unmountFn = useLatest(fn);\n  useEffectOnce(() => () => unmountFn.current());\n}\n\n// src/useThrottle.ts\nfunction useThrottle(callback, delayMs = 500, trailing = false) {\n  const [now, setNow] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const callbackRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(callback);\n  const hasPendingCall = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n  const timer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    callbackRef.current = callback;\n  }, [callback]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!now) {\n      return;\n    }\n    if (!timer.current) {\n      callbackRef.current();\n      const timerCallback = () => {\n        if (hasPendingCall.current) {\n          hasPendingCall.current = false;\n          if (trailing) {\n            callbackRef.current();\n          }\n          timer.current = void 0;\n        } else {\n          timer.current = void 0;\n        }\n      };\n      timer.current = window.setTimeout(timerCallback, delayMs);\n    } else {\n      hasPendingCall.current = true;\n    }\n  }, [delayMs, now, trailing]);\n  useUnmount(() => {\n    window.clearTimeout(timer.current);\n    timer.current = void 0;\n  });\n  return () => setNow(Date.now());\n}\n\n// src/useThrottleValue.ts\n\nfunction useThrottleValue(value, delayMs) {\n  const [throttledValue, setThrottledValue] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(value);\n  const hasNextValue = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n  const nextValue = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const timer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!timer.current) {\n      setThrottledValue(value);\n      const timeoutCallback = () => {\n        if (hasNextValue.current) {\n          hasNextValue.current = false;\n          setThrottledValue(nextValue.current);\n          timer.current = window.setTimeout(timeoutCallback, delayMs);\n        } else {\n          timer.current = void 0;\n        }\n      };\n      timer.current = window.setTimeout(timeoutCallback, delayMs);\n    } else {\n      hasNextValue.current = true;\n      nextValue.current = value;\n    }\n  }, [delayMs, value]);\n  useUnmount(() => {\n    window.clearTimeout(timer.current);\n    timer.current = void 0;\n  });\n  return throttledValue;\n}\n\n// src/useToggle.ts\n\nfunction useToggle(initialValue = true) {\n  const [value, toggle] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useReducer)(\n    (state, nextValue) => typeof nextValue === \"boolean\" ? nextValue : !state,\n    initialValue\n  );\n  const toggleOn = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => toggle(true), []);\n  const toggleOff = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => toggle(false), []);\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => [value, { toggle, toggleOn, toggleOff }], [value, toggleOn, toggleOff]);\n}\n\n// src/useUpdate.ts\n\nvar updateReducer = (number) => (number + 1) % 1e6;\nfunction useUpdate() {\n  const [, update] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useReducer)(updateReducer, 0);\n  return update;\n}\n\n// src/useUpdateEffect.ts\n\nfunction useUpdateEffect(effect, deps) {\n  const isFirstMount = useIsFirstMount();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!isFirstMount) {\n      return effect();\n    }\n    return void 0;\n  }, deps);\n}\n\n// src/useWhyDidYouUpdate.tsx\n\nfunction useWhyDidYouUpdate(props, nameOrOptions = {}) {\n  const [changes, setChanges] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  const previousProps = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const { name, skipLog = false } = isString(nameOrOptions) ? { name: nameOrOptions } : nameOrOptions;\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const { current } = previousProps;\n    setChanges({});\n    if (current) {\n      const allKeys = Object.keys({ ...current, ...props });\n      const changesObject = {};\n      allKeys.forEach((key) => {\n        if (current[key] !== props[key]) {\n          changesObject[key] = {\n            from: current[key],\n            to: props[key]\n          };\n        }\n      });\n      if (Object.keys(changesObject).length) {\n        setChanges(changesObject);\n        if (!skipLog) {\n          const nameToken = name ? `: ${name}` : \"\";\n          console.log(`[why-did-you-update${nameToken}]`, changesObject);\n        }\n      }\n    }\n    previousProps.current = props;\n  }, [name, props, skipLog]);\n  return Object.keys(changes).length ? changes : false;\n}\n\n// src/useWindowSize.ts\n\nfunction useWindowSize(debounce = 0) {\n  const [size, setSize] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    height: canUseDOM() ? window.innerHeight : 0,\n    width: canUseDOM() ? window.innerWidth : 0\n  });\n  const timeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0);\n  const handleResize = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(() => {\n    window.clearTimeout(timeoutRef.current);\n    timeoutRef.current = window.setTimeout(() => {\n      setSize({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n    }, debounce);\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!canUseDOM()) {\n      return () => void 0;\n    }\n    const getSize = handleResize.current;\n    setSize({\n      height: window.innerHeight,\n      width: window.innerWidth\n    });\n    on(window, \"resize\", getSize);\n    return () => {\n      off(window, \"resize\", getSize);\n    };\n  }, []);\n  return size;\n}\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BnaWxiYXJiYXJhK2hvb2tzQDAuOC4yX3JlYWN0QDE5LjEuMS9ub2RlX21vZHVsZXMvQGdpbGJhcmJhcmEvaG9va3MvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDbUU7O0FBRW5FO0FBQ2lDOztBQUVqQztBQUMwQztBQUNLOztBQUUvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNLElBQXFDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDZDQUFNO0FBQ3BCLHVCQUF1QixrRUFBUztBQUNoQztBQUNBO0FBQ0EsRUFBRSxnREFBUztBQUNYOztBQUVBO0FBQzBDO0FBQzFDO0FBQ0EsdUJBQXVCLDZDQUFPO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0NBQXdDLCtDQUFRO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjLDZDQUFPO0FBQ3JCO0FBQ0EsRUFBRSxnREFBVTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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d0JBQXdCLDZDQUFRO0FBQ2hDLFVBQVUsd0JBQXdCLDhCQUE4QixzQkFBc0I7QUFDdEYsRUFBRSxnREFBVztBQUNiLFlBQVksVUFBVTtBQUN0QixpQkFBaUI7QUFDakI7QUFDQSxvQ0FBb0Msc0JBQXNCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLEtBQUs7QUFDN0MsNENBQTRDLFVBQVU7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUM2RjtBQUM3RjtBQUNBLDBCQUEwQiwrQ0FBVTtBQUNwQztBQUNBO0FBQ0EsR0FBRztBQUNILHFCQUFxQiw2Q0FBUTtBQUM3Qix1QkFBdUIsNkNBQVE7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNILEVBQUUsZ0RBQVc7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBdUNFO0FBQ0YiLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2Uvbm9kZV9tb2R1bGVzLy5wbnBtL0BnaWxiYXJiYXJhK2hvb2tzQDAuOC4yX3JlYWN0QDE5LjEuMS9ub2RlX21vZHVsZXMvQGdpbGJhcmJhcmEvaG9va3MvZGlzdC9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3VzZUNsaWNrT3V0c2lkZS50c1xuaW1wb3J0IHsgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDIsIHVzZVJlZiBhcyB1c2VSZWYzIH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy91c2VTdGFibGVWYWx1ZS50c1xuaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL3VzZURlZXBDb21wYXJlRWZmZWN0LnRzXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IGRlZXBFcXVhbCBmcm9tIFwiQGdpbGJhcmJhcmEvZGVlcC1lcXVhbFwiO1xuXG4vLyBzcmMvdXRpbHMudHNcbmZ1bmN0aW9uIGNhblVzZURPTSgpIHtcbiAgcmV0dXJuICEhKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmRvY3VtZW50ICYmIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KTtcbn1cbmZ1bmN0aW9uIGdldEVsZW1lbnQodGFyZ2V0KSB7XG4gIGlmICghY2FuVXNlRE9NKCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBsZXQgdGFyZ2V0RWw7XG4gIGlmICh0eXBlb2YgdGFyZ2V0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgdGFyZ2V0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7XG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0RWwgPSB0YXJnZXQgJiYgXCJjdXJyZW50XCIgaW4gdGFyZ2V0ID8gdGFyZ2V0LmN1cnJlbnQgOiB0YXJnZXQ7XG4gIH1cbiAgcmV0dXJuIHRhcmdldEVsO1xufVxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh2YWx1ZSkge1xuICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSAhPT0gXCJbb2JqZWN0IE9iamVjdF1cIikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBwcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpO1xuICByZXR1cm4gcHJvdG90eXBlID09PSBudWxsIHx8IHByb3RvdHlwZSA9PT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHt9KTtcbn1cbmZ1bmN0aW9uIGlzUHJpbWl0aXZlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gT2JqZWN0KHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGlzU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCI7XG59XG5mdW5jdGlvbiBpc1VSTCh2YWx1ZSkge1xuICBpZiAoIWlzU3RyaW5nKHZhbHVlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB0cnkge1xuICAgIG5ldyBVUkwodmFsdWUpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbmZ1bmN0aW9uIG5vb3AoKSB7XG4gIHJldHVybiB2b2lkIDA7XG59XG5mdW5jdGlvbiBvbih0YXJnZXQsIC4uLnJlc3QpIHtcbiAgaWYgKHRhcmdldCAmJiB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKC4uLnJlc3QpO1xuICB9XG59XG5mdW5jdGlvbiBvZmYodGFyZ2V0LCAuLi5yZXN0KSB7XG4gIGlmICh0YXJnZXQgJiYgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIpIHtcbiAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lciguLi5yZXN0KTtcbiAgfVxufVxuXG4vLyBzcmMvdXNlRGVlcENvbXBhcmVFZmZlY3QudHNcbmZ1bmN0aW9uIHVzZURlZXBDb21wYXJlRWZmZWN0KGVmZmVjdCwgZGVwZW5kZW5jaWVzKSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBpZiAoIShkZXBlbmRlbmNpZXMgaW5zdGFuY2VvZiBBcnJheSkgfHwgIWRlcGVuZGVuY2llcy5sZW5ndGgpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgXCJgdXNlRGVlcENvbXBhcmVFZmZlY3RgIHNob3VsZCBub3QgYmUgdXNlZCB3aXRoIG5vIGRlcGVuZGVuY2llcy4gVXNlIFJlYWN0LnVzZUVmZmVjdCBpbnN0ZWFkLlwiXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoZGVwZW5kZW5jaWVzLmxlbmd0aCAmJiBkZXBlbmRlbmNpZXMuZXZlcnkoaXNQcmltaXRpdmUpKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIFwiYHVzZURlZXBDb21wYXJlRWZmZWN0YCBzaG91bGQgbm90IGJlIHVzZWQgd2l0aCBkZXBlbmRlbmNpZXMgdGhhdCBhcmUgYWxsIHByaW1pdGl2ZSB2YWx1ZXMuIFVzZSBSZWFjdC51c2VFZmZlY3QgaW5zdGVhZC5cIlxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgY29uc3QgcmVmID0gdXNlUmVmKHZvaWQgMCk7XG4gIGlmICghcmVmLmN1cnJlbnQgfHwgIWRlZXBFcXVhbChkZXBlbmRlbmNpZXMsIHJlZi5jdXJyZW50KSkge1xuICAgIHJlZi5jdXJyZW50ID0gZGVwZW5kZW5jaWVzO1xuICB9XG4gIHVzZUVmZmVjdChlZmZlY3QsIHJlZi5jdXJyZW50KTtcbn1cblxuLy8gc3JjL3VzZUlzRmlyc3RNb3VudC50c1xuaW1wb3J0IHsgdXNlUmVmIGFzIHVzZVJlZjIgfSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZUlzRmlyc3RNb3VudCgpIHtcbiAgY29uc3QgaXNGaXJzdE1vdW50ID0gdXNlUmVmMih0cnVlKTtcbiAgaWYgKGlzRmlyc3RNb3VudC5jdXJyZW50KSB7XG4gICAgaXNGaXJzdE1vdW50LmN1cnJlbnQgPSBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gaXNGaXJzdE1vdW50LmN1cnJlbnQ7XG59XG5cbi8vIHNyYy91c2VTdGFibGVWYWx1ZS50c1xuZnVuY3Rpb24gdXNlU3RhYmxlVmFsdWUodmFsdWUpIHtcbiAgY29uc3QgW3N0YWJsZVZhbHVlLCBzZXRTdGFibGVWYWx1ZV0gPSB1c2VTdGF0ZSgoKSA9PiB2YWx1ZSk7XG4gIGNvbnN0IGlzRmlyc3RNb3VudCA9IHVzZUlzRmlyc3RNb3VudCgpO1xuICB1c2VEZWVwQ29tcGFyZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzRmlyc3RNb3VudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRTdGFibGVWYWx1ZSgoKSA9PiB2YWx1ZSk7XG4gIH0sIFt2YWx1ZV0pO1xuICByZXR1cm4gc3RhYmxlVmFsdWU7XG59XG5cbi8vIHNyYy91c2VDbGlja091dHNpZGUudHNcbmZ1bmN0aW9uIHVzZUNsaWNrT3V0c2lkZShjYWxsYmFjaykge1xuICBjb25zdCByZWYgPSB1c2VSZWYzKG51bGwpO1xuICBjb25zdCBzdGFibGVDYWxsYmFjayA9IHVzZVN0YWJsZVZhbHVlKGNhbGxiYWNrKTtcbiAgdXNlRWZmZWN0MigoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlQ2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmICghcmVmLmN1cnJlbnQ/LmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHtcbiAgICAgICAgc3RhYmxlQ2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIG9uKGRvY3VtZW50LCBcImNsaWNrXCIsIGhhbmRsZUNsaWNrKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgb2ZmKGRvY3VtZW50LCBcImNsaWNrXCIsIGhhbmRsZUNsaWNrKTtcbiAgICB9O1xuICB9LCBbc3RhYmxlQ2FsbGJhY2tdKTtcbiAgcmV0dXJuIHJlZjtcbn1cblxuLy8gc3JjL3VzZURlYm91bmNlLnRzXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDMsIHVzZVJlZiBhcyB1c2VSZWY0IH0gZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VEZWJvdW5jZShjYWxsYmFjaywgZGVsYXlNcyA9IDI1MCwgZGVwcyA9IFtdKSB7XG4gIGNvbnN0IHN0YXR1cyA9IHVzZVJlZjQoXCJwZW5kaW5nXCIpO1xuICBjb25zdCB0aW1lb3V0ID0gdXNlUmVmNCgpO1xuICBjb25zdCBzYXZlZENhbGxiYWNrID0gdXNlUmVmNChjYWxsYmFjayk7XG4gIGNvbnN0IGlzRmlyc3RNb3VudCA9IHVzZUlzRmlyc3RNb3VudCgpO1xuICBjb25zdCBjbGVhciA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzdGF0dXMuY3VycmVudCA9IFwiY2FuY2VsbGVkXCI7XG4gICAgdGltZW91dC5jdXJyZW50ICYmIGNsZWFyVGltZW91dCh0aW1lb3V0LmN1cnJlbnQpO1xuICB9LCBbXSk7XG4gIGNvbnN0IHNldCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzdGF0dXMuY3VycmVudCA9IFwicGVuZGluZ1wiO1xuICAgIHRpbWVvdXQuY3VycmVudCAmJiBjbGVhclRpbWVvdXQodGltZW91dC5jdXJyZW50KTtcbiAgICB0aW1lb3V0LmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHN0YXR1cy5jdXJyZW50ID0gXCJjb21wbGV0ZWRcIjtcbiAgICAgIHNhdmVkQ2FsbGJhY2suY3VycmVudCgpO1xuICAgIH0sIGRlbGF5TXMpO1xuICB9LCBbZGVsYXlNc10pO1xuICBjb25zdCBnZXRTdGF0dXMgPSB1c2VDYWxsYmFjaygoKSA9PiBzdGF0dXMuY3VycmVudCwgW10pO1xuICB1c2VFZmZlY3QzKCgpID0+IHtcbiAgICBzYXZlZENhbGxiYWNrLmN1cnJlbnQgPSBjYWxsYmFjaztcbiAgfSwgW2NhbGxiYWNrXSk7XG4gIHVzZURlZXBDb21wYXJlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWlzRmlyc3RNb3VudCkge1xuICAgICAgc2V0KCk7XG4gICAgICByZXR1cm4gY2xlYXI7XG4gICAgfVxuICAgIHJldHVybiB2b2lkIDA7XG4gIH0sIFtzZXQsIGNsZWFyLCBkZXBzLCBkZWxheU1zXSk7XG4gIHJldHVybiB7IGNhbmNlbDogY2xlYXIsIGdldFN0YXR1cyB9O1xufVxuXG4vLyBzcmMvdXNlRWZmZWN0T25jZS50c1xuaW1wb3J0IHsgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDQsIHVzZVJlZiBhcyB1c2VSZWY1IH0gZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VFZmZlY3RPbmNlKGVmZmVjdCkge1xuICBjb25zdCBkZXN0cm95Rm4gPSB1c2VSZWY1KG51bGwpO1xuICBjb25zdCBlZmZlY3RDYWxsZWQgPSB1c2VSZWY1KGZhbHNlKTtcbiAgY29uc3QgZWZmZWN0Rm4gPSB1c2VSZWY1KGVmZmVjdCk7XG4gIHVzZUVmZmVjdDQoKCkgPT4ge1xuICAgIGlmICghZWZmZWN0Q2FsbGVkLmN1cnJlbnQpIHtcbiAgICAgIGRlc3Ryb3lGbi5jdXJyZW50ID0gZWZmZWN0Rm4uY3VycmVudCgpO1xuICAgICAgZWZmZWN0Q2FsbGVkLmN1cnJlbnQgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGRlc3Ryb3lGbi5jdXJyZW50KSB7XG4gICAgICAgIGRlc3Ryb3lGbi5jdXJyZW50KCk7XG4gICAgICAgIGRlc3Ryb3lGbi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbXSk7XG59XG5cbi8vIHNyYy91c2VGZXRjaC50c3hcbmltcG9ydCB7IHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrMiwgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDUsIHVzZU1lbW8sIHVzZVJlZiBhcyB1c2VSZWY2LCB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTIgfSBmcm9tIFwicmVhY3RcIjtcbnZhciBVU0VfRkVUQ0hfU1RBVFVTID0ge1xuICBJRExFOiBcIklETEVcIixcbiAgTE9BRElORzogXCJMT0FESU5HXCIsXG4gIFNVQ0NFU1M6IFwiU1VDQ0VTU1wiLFxuICBFUlJPUjogXCJFUlJPUlwiXG59O1xuYXN5bmMgZnVuY3Rpb24gcmVxdWVzdChvcHRpb25zKSB7XG4gIGNvbnN0IHtcbiAgICBib2R5ID0gdm9pZCAwLFxuICAgIGhlYWRlcnMgPSB7fSxcbiAgICBtZXRob2QgPSBcIkdFVFwiLFxuICAgIG1vZGUgPSBcImNvcnNcIixcbiAgICB0eXBlID0gXCJqc29uXCIsXG4gICAgdXJsID0gXCJcIlxuICB9ID0gb3B0aW9ucztcbiAgY29uc3QgY29udGVudFR5cGVzID0ge1xuICAgIGpzb246IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgIHVybGVuY29kZWQ6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCJcbiAgfTtcbiAgY29uc3QgcGFyYW1zID0ge1xuICAgIGJvZHk6IHZvaWQgMCxcbiAgICBjYWNoZTogXCJuby1zdG9yZVwiLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBjb250ZW50VHlwZXNbdHlwZV0sXG4gICAgICAuLi5oZWFkZXJzXG4gICAgfSxcbiAgICBtZXRob2QsXG4gICAgbW9kZSxcbiAgICBjcmVkZW50aWFsczogdm9pZCAwXG4gIH07XG4gIGlmIChib2R5KSB7XG4gICAgcGFyYW1zLmJvZHkgPSBpc1BsYWluT2JqZWN0KGJvZHkpICYmIHR5cGUgPT09IFwianNvblwiID8gSlNPTi5zdHJpbmdpZnkoYm9keSkgOiBib2R5O1xuICB9XG4gIHJldHVybiBmZXRjaCh1cmwsIHBhcmFtcykudGhlbihhc3luYyAocmVzcG9uc2UpID0+IHtcbiAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgIGxldCBjb250ZW50O1xuICAgIHRyeSB7XG4gICAgICBjb250ZW50ID0gSlNPTi5wYXJzZSh0ZXh0KTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIGNvbnRlbnQgPSB0ZXh0O1xuICAgIH1cbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID4gMjk5KSB7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KTtcbiAgICAgIGVycm9yLnN0YXR1cyA9IHJlc3BvbnNlLnN0YXR1cztcbiAgICAgIGVycm9yLnJlc3BvbnNlID0gY29udGVudDtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICByZXR1cm4gY29udGVudDtcbiAgfSk7XG59XG5mdW5jdGlvbiB1c2VGZXRjaCh1cmxPck9wdGlvbnMpIHtcbiAgY29uc3QgaXNBY3RpdmUgPSB1c2VSZWY2KGZhbHNlKTtcbiAgY29uc3QgcmV0cnlDb3VudCA9IHVzZVJlZjYoMCk7XG4gIGNvbnN0IFt7IGRhdGEsIGVycm9yLCBzdGF0dXMgfSwgc2V0U3RhdGVdID0gdXNlU3RhdGUyKHtcbiAgICBkYXRhOiB2b2lkIDAsXG4gICAgZXJyb3I6IHZvaWQgMCxcbiAgICBzdGF0dXM6IFVTRV9GRVRDSF9TVEFUVVMuSURMRVxuICB9KTtcbiAgY29uc3Qge1xuICAgIHJldHJ5ID0gMCxcbiAgICByZXRyeURlbGF5ID0gKGF0dGVtcHQpID0+IGF0dGVtcHQgKiAxZTMsXG4gICAgd2FpdCA9IGZhbHNlLFxuICAgIC4uLm9wdGlvbnNcbiAgfSA9IGlzVVJMKHVybE9yT3B0aW9ucykgPyB7XG4gICAgdHlwZTogXCJqc29uXCIsXG4gICAgdXJsOiB1cmxPck9wdGlvbnNcbiAgfSA6IHVybE9yT3B0aW9ucztcbiAgaWYgKCFpc1BsYWluT2JqZWN0KG9wdGlvbnMpIHx8ICFpc1VSTChvcHRpb25zLnVybCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJFeHBlY3RlZCBhbiBvcHRpb25zIG9iamVjdCBvciBVUkxcIik7XG4gIH1cbiAgY29uc3QgZ2V0RGF0YSA9IHVzZUNhbGxiYWNrMihcbiAgICAoZXJhc2VEYXRhKSA9PiB7XG4gICAgICBzZXRTdGF0ZSgocykgPT4gKHtcbiAgICAgICAgLi4ucyxcbiAgICAgICAgZGF0YTogZXJhc2VEYXRhID8gdm9pZCAwIDogcy5kYXRhLFxuICAgICAgICBlcnJvcjogdm9pZCAwLFxuICAgICAgICBzdGF0dXM6IFVTRV9GRVRDSF9TVEFUVVMuTE9BRElOR1xuICAgICAgfSkpO1xuICAgICAgcmVxdWVzdChvcHRpb25zKS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICBpZiAoaXNBY3RpdmUuY3VycmVudCkge1xuICAgICAgICAgIHNldFN0YXRlKChzKSA9PiAoe1xuICAgICAgICAgICAgLi4ucyxcbiAgICAgICAgICAgIGRhdGE6IHJlc3BvbnNlLFxuICAgICAgICAgICAgc3RhdHVzOiBVU0VfRkVUQ0hfU1RBVFVTLlNVQ0NFU1NcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgIH0pLmNhdGNoKChyZXNwb25zZUVycm9yKSA9PiB7XG4gICAgICAgIGlmIChpc0FjdGl2ZS5jdXJyZW50KSB7XG4gICAgICAgICAgc2V0U3RhdGUoKHMpID0+ICh7XG4gICAgICAgICAgICAuLi5zLFxuICAgICAgICAgICAgZXJyb3I6IHJlc3BvbnNlRXJyb3IsXG4gICAgICAgICAgICBzdGF0dXM6IFVTRV9GRVRDSF9TVEFUVVMuRVJST1JcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJldHJ5ICYmIHJldHJ5Q291bnQuY3VycmVudCA8IHJldHJ5KSB7XG4gICAgICAgICAgcmV0cnlDb3VudC5jdXJyZW50ICs9IDE7XG4gICAgICAgICAgc2V0VGltZW91dChcbiAgICAgICAgICAgIGdldERhdGEsXG4gICAgICAgICAgICB0eXBlb2YgcmV0cnlEZWxheSA9PT0gXCJmdW5jdGlvblwiID8gcmV0cnlEZWxheShyZXRyeUNvdW50LmN1cnJlbnQpIDogcmV0cnlEZWxheVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW29wdGlvbnMsIHJldHJ5LCByZXRyeURlbGF5XVxuICApO1xuICB1c2VFZmZlY3Q1KCgpID0+IHtcbiAgICBpc0FjdGl2ZS5jdXJyZW50ID0gdHJ1ZTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaXNBY3RpdmUuY3VycmVudCA9IGZhbHNlO1xuICAgIH07XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0NSgoKSA9PiB7XG4gICAgaWYgKHN0YXR1cyA9PT0gVVNFX0ZFVENIX1NUQVRVUy5JRExFICYmICF3YWl0KSB7XG4gICAgICBnZXREYXRhKCk7XG4gICAgfVxuICB9LCBbZ2V0RGF0YSwgc3RhdHVzLCB3YWl0XSk7XG4gIGNvbnN0IGlzRXJyb3IgPSB1c2VDYWxsYmFjazIoKCkgPT4gc3RhdHVzID09PSBVU0VfRkVUQ0hfU1RBVFVTLkVSUk9SLCBbc3RhdHVzXSk7XG4gIGNvbnN0IGlzRmV0Y2hlZCA9IHVzZUNhbGxiYWNrMihcbiAgICAoKSA9PiBbVVNFX0ZFVENIX1NUQVRVUy5TVUNDRVNTLCBVU0VfRkVUQ0hfU1RBVFVTLkVSUk9SXS5pbmNsdWRlcyhzdGF0dXMpLFxuICAgIFtzdGF0dXNdXG4gICk7XG4gIGNvbnN0IGlzTG9hZGluZyA9IHVzZUNhbGxiYWNrMigoKSA9PiBzdGF0dXMgPT09IFVTRV9GRVRDSF9TVEFUVVMuTE9BRElORywgW3N0YXR1c10pO1xuICBjb25zdCBpc1BhdXNlZCA9IHVzZUNhbGxiYWNrMigoKSA9PiBzdGF0dXMgPT09IFVTRV9GRVRDSF9TVEFUVVMuSURMRSAmJiB3YWl0LCBbc3RhdHVzLCB3YWl0XSk7XG4gIGNvbnN0IGlzU3VjY2VzcyA9IHVzZUNhbGxiYWNrMigoKSA9PiBzdGF0dXMgPT09IFVTRV9GRVRDSF9TVEFUVVMuU1VDQ0VTUywgW3N0YXR1c10pO1xuICBjb25zdCByZWZldGNoID0gdXNlQ2FsbGJhY2syKChlcmFzZURhdGEgPSBmYWxzZSkgPT4gZ2V0RGF0YShlcmFzZURhdGEpLCBbZ2V0RGF0YV0pO1xuICByZXR1cm4gdXNlTWVtbyhcbiAgICAoKSA9PiAoe1xuICAgICAgZGF0YSxcbiAgICAgIGVycm9yLFxuICAgICAgaXNFcnJvcixcbiAgICAgIGlzRmV0Y2hlZCxcbiAgICAgIGlzTG9hZGluZyxcbiAgICAgIGlzUGF1c2VkLFxuICAgICAgaXNTdWNjZXNzLFxuICAgICAgcmVmZXRjaCxcbiAgICAgIHN0YXR1c1xuICAgIH0pLFxuICAgIFtkYXRhLCBlcnJvciwgaXNFcnJvciwgaXNGZXRjaGVkLCBpc0xvYWRpbmcsIGlzUGF1c2VkLCBpc1N1Y2Nlc3MsIHJlZmV0Y2gsIHN0YXR1c11cbiAgKTtcbn1cblxuLy8gc3JjL3VzZUludGVyc2VjdGlvbk9ic2VydmVyLnRzXG5pbXBvcnQgeyB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0NiwgdXNlTWVtbyBhcyB1c2VNZW1vMiwgdXNlU3RhdGUgYXMgdXNlU3RhdGUzIH0gZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VJbnRlcnNlY3Rpb25PYnNlcnZlcih0YXJnZXQsIG9wdGlvbnMpIHtcbiAgY29uc3QgeyBkZWxheSA9IDAsIG9uY2UgPSBmYWxzZSwgcm9vdCA9IG51bGwsIHJvb3RNYXJnaW4gPSBcIjAlXCIsIHRocmVzaG9sZCA9IDAgfSA9IG9wdGlvbnMgfHwge307XG4gIGNvbnN0IFt2YWx1ZSwgc2V0VmFsdWVdID0gdXNlU3RhdGUzKCk7XG4gIGNvbnN0IGRpc2FibGVkID0gdmFsdWU/LmlzSW50ZXJzZWN0aW5nICYmIG9uY2U7XG4gIGNvbnN0IG9ic2VydmVyID0gdXNlTWVtbzIoKCkgPT4ge1xuICAgIGlmICghY2FuVXNlRE9NKCkpIHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgIChbZW50cnldKSA9PiB7XG4gICAgICAgIGlmIChkZWxheSkge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc2V0VmFsdWUoZW50cnkpLCBkZWxheSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNldFZhbHVlKGVudHJ5KTtcbiAgICAgIH0sXG4gICAgICB7IHRocmVzaG9sZCwgcm9vdCwgcm9vdE1hcmdpbiB9XG4gICAgKTtcbiAgfSwgW2RlbGF5LCByb290LCByb290TWFyZ2luLCB0aHJlc2hvbGRdKTtcbiAgdXNlRWZmZWN0NigoKSA9PiB7XG4gICAgaWYgKCFjYW5Vc2VET00oKSB8fCAhKG9ic2VydmVyIGluc3RhbmNlb2YgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIpIHx8IGRpc2FibGVkKSB7XG4gICAgICByZXR1cm4gKCkgPT4gdm9pZCAwO1xuICAgIH1cbiAgICBjb25zdCBlbGVtZW50ID0gZ2V0RWxlbWVudCh0YXJnZXQpO1xuICAgIGlmICghZWxlbWVudCkge1xuICAgICAgcmV0dXJuICgpID0+IHZvaWQgMDtcbiAgICB9XG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZShlbGVtZW50KTtcbiAgICByZXR1cm4gKCkgPT4gb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICB9LCBbdGFyZ2V0LCByb290LCByb290TWFyZ2luLCBkaXNhYmxlZCwgb2JzZXJ2ZXJdKTtcbiAgcmV0dXJuIHZhbHVlO1xufVxuXG4vLyBzcmMvdXNlSW50ZXJ2YWwudHNcbmltcG9ydCB7IHVzZUVmZmVjdCBhcyB1c2VFZmZlY3Q3LCB1c2VSZWYgYXMgdXNlUmVmNyB9IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlSW50ZXJ2YWwoY2FsbGJhY2ssIGRlbGF5TXMgPSAxMDApIHtcbiAgY29uc3Qgc2F2ZWRDYWxsYmFjayA9IHVzZVJlZjcoY2FsbGJhY2spO1xuICB1c2VFZmZlY3Q3KCgpID0+IHtcbiAgICBzYXZlZENhbGxiYWNrLmN1cnJlbnQgPSBjYWxsYmFjaztcbiAgfSk7XG4gIHVzZUVmZmVjdDcoKCkgPT4ge1xuICAgIGlmIChkZWxheU1zICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHNhdmVkQ2FsbGJhY2suY3VycmVudCgpLCBkZWxheU1zKTtcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfSwgW2RlbGF5TXNdKTtcbn1cblxuLy8gc3JjL3VzZUlzTW91bnRlZC50c1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2sgYXMgdXNlQ2FsbGJhY2szLCB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0OCwgdXNlUmVmIGFzIHVzZVJlZjggfSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZUlzTW91bnRlZCgpIHtcbiAgY29uc3QgaXNNb3VudGVkID0gdXNlUmVmOChmYWxzZSk7XG4gIHVzZUVmZmVjdDgoKCkgPT4ge1xuICAgIGlzTW91bnRlZC5jdXJyZW50ID0gdHJ1ZTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaXNNb3VudGVkLmN1cnJlbnQgPSBmYWxzZTtcbiAgICB9O1xuICB9LCBbXSk7XG4gIHJldHVybiB1c2VDYWxsYmFjazMoKCkgPT4gaXNNb3VudGVkLmN1cnJlbnQsIFtdKTtcbn1cblxuLy8gc3JjL3VzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QudHNcbmltcG9ydCB7IHVzZUVmZmVjdCBhcyB1c2VFZmZlY3Q5LCB1c2VMYXlvdXRFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbnZhciB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0ID0gY2FuVXNlRE9NKCkgPyB1c2VMYXlvdXRFZmZlY3QgOiB1c2VFZmZlY3Q5O1xuXG4vLyBzcmMvdXNlTGF0ZXN0LnRzXG5pbXBvcnQgeyB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0MTAsIHVzZVJlZiBhcyB1c2VSZWY5IH0gZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VMYXRlc3QodmFsdWUpIHtcbiAgY29uc3QgcmVmID0gdXNlUmVmOSh2YWx1ZSk7XG4gIHVzZUVmZmVjdDEwKCgpID0+IHtcbiAgICByZWYuY3VycmVudCA9IHZhbHVlO1xuICB9KTtcbiAgcmV0dXJuIHJlZjtcbn1cblxuLy8gc3JjL3VzZUxpZmVjeWNsZXMudHNcbmltcG9ydCB7IHVzZUVmZmVjdCBhcyB1c2VFZmZlY3QxMSB9IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlTGlmZWN5Y2xlcyhtb3VudCwgdW5tb3VudCkge1xuICB1c2VFZmZlY3QxMSgoKSA9PiB7XG4gICAgbW91bnQoKTtcbiAgICByZXR1cm4gdW5tb3VudDtcbiAgfSwgW10pO1xufVxuXG4vLyBzcmMvdXNlTG9jYWxTdG9yYWdlLnRzXG5pbXBvcnQge1xuICB1c2VDYWxsYmFjayBhcyB1c2VDYWxsYmFjazQsXG4gIHVzZUxheW91dEVmZmVjdCBhcyB1c2VMYXlvdXRFZmZlY3QyLFxuICB1c2VNZW1vIGFzIHVzZU1lbW8zLFxuICB1c2VSZWYgYXMgdXNlUmVmMTAsXG4gIHVzZVN0YXRlIGFzIHVzZVN0YXRlNFxufSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZUxvY2FsU3RvcmFnZUhvb2soa2V5LCBpbml0aWFsVmFsdWUsIG9wdGlvbnMpIHtcbiAgaWYgKCFrZXkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZUxvY2FsU3RvcmFnZTogXCJrZXlcIiBpcyByZXF1aXJlZCcpO1xuICB9XG4gIGNvbnN0IGRlc2VyaWFsaXplciA9IHVzZU1lbW8zKFxuICAgICgpID0+IG9wdGlvbnM/LnJhdyA/ICh2YWx1ZSkgPT4gdmFsdWUgOiBvcHRpb25zPy5kZXNlcmlhbGl6ZXIgPz8gSlNPTi5wYXJzZSxcbiAgICBbb3B0aW9uc11cbiAgKTtcbiAgY29uc3Qgc2VyaWFsaXplciA9IHVzZU1lbW8zKFxuICAgICgpID0+IG9wdGlvbnM/LnJhdyA/IFN0cmluZyA6IG9wdGlvbnM/LnNlcmlhbGl6ZXIgPz8gSlNPTi5zdHJpbmdpZnksXG4gICAgW29wdGlvbnNdXG4gICk7XG4gIGNvbnN0IGluaXRpYWxpemVyID0gdXNlUmVmMTAoKGspID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbG9jYWxTdG9yYWdlVmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrKTtcbiAgICAgIGlmIChsb2NhbFN0b3JhZ2VWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZGVzZXJpYWxpemVyKGxvY2FsU3RvcmFnZVZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGluaXRpYWxWYWx1ZSAmJiBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrLCBzZXJpYWxpemVyKGluaXRpYWxWYWx1ZSkpO1xuICAgICAgcmV0dXJuIGluaXRpYWxWYWx1ZTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBpbml0aWFsVmFsdWU7XG4gICAgfVxuICB9KTtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZTQoKCkgPT4gaW5pdGlhbGl6ZXIuY3VycmVudChrZXkpKTtcbiAgdXNlTGF5b3V0RWZmZWN0MigoKSA9PiBzZXRTdGF0ZShpbml0aWFsaXplci5jdXJyZW50KGtleSkpLCBba2V5XSk7XG4gIGNvbnN0IHNldCA9IHVzZUNhbGxiYWNrNChcbiAgICAocGF0Y2gpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG5ld1N0YXRlID0gcGF0Y2ggaW5zdGFuY2VvZiBGdW5jdGlvbiA/IHBhdGNoKHN0YXRlKSA6IHBhdGNoO1xuICAgICAgICBpZiAodHlwZW9mIG5ld1N0YXRlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCB2YWx1ZTtcbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgICBpZiAob3B0aW9ucy5yYXcpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdHlwZW9mIG5ld1N0YXRlID09PSBcInN0cmluZ1wiID8gbmV3U3RhdGUgOiBKU09OLnN0cmluZ2lmeShuZXdTdGF0ZSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zPy5zZXJpYWxpemVyKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IG9wdGlvbnMuc2VyaWFsaXplcihuZXdTdGF0ZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhbHVlID0gSlNPTi5zdHJpbmdpZnkobmV3U3RhdGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YWx1ZSA9IEpTT04uc3RyaW5naWZ5KG5ld1N0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTtcbiAgICAgICAgc2V0U3RhdGUoZGVzZXJpYWxpemVyKHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtkZXNlcmlhbGl6ZXIsIGtleSwgb3B0aW9ucywgc3RhdGVdXG4gICk7XG4gIGNvbnN0IHJlbW92ZSA9IHVzZUNhbGxiYWNrNCgoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgICBzZXRTdGF0ZSh2b2lkIDApO1xuICAgIH0gY2F0Y2gge1xuICAgIH1cbiAgfSwgW2tleSwgc2V0U3RhdGVdKTtcbiAgcmV0dXJuIFtzdGF0ZSwgc2V0LCByZW1vdmVdO1xufVxuZnVuY3Rpb24gdXNlTG9jYWxTdG9yYWdlU1NSKF9rZXksIGluaXRpYWxWYWx1ZSwgX29wdGlvbnMpIHtcbiAgcmV0dXJuIFtpbml0aWFsVmFsdWUsIG5vb3AsIG5vb3BdO1xufVxudmFyIHVzZUxvY2FsU3RvcmFnZSA9IGNhblVzZURPTSgpID8gdXNlTG9jYWxTdG9yYWdlSG9vayA6IHVzZUxvY2FsU3RvcmFnZVNTUjtcblxuLy8gc3JjL3VzZVNldFN0YXRlLnRzXG5pbXBvcnQgeyB1c2VDYWxsYmFjayBhcyB1c2VDYWxsYmFjazUsIHVzZVN0YXRlIGFzIHVzZVN0YXRlNSB9IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlU2V0U3RhdGUoaW5pdGlhbFN0YXRlID0ge30pIHtcbiAgY29uc3QgW3N0YXRlLCBzZXRdID0gdXNlU3RhdGU1KGluaXRpYWxTdGF0ZSk7XG4gIGNvbnN0IHNldFN0YXRlID0gdXNlQ2FsbGJhY2s1KChwYXRjaCkgPT4ge1xuICAgIHNldCgocHJldmlvdXNTdGF0ZSkgPT4gKHtcbiAgICAgIC4uLnByZXZpb3VzU3RhdGUsXG4gICAgICAuLi5wYXRjaCBpbnN0YW5jZW9mIEZ1bmN0aW9uID8gcGF0Y2gocHJldmlvdXNTdGF0ZSkgOiBwYXRjaFxuICAgIH0pKTtcbiAgfSwgW10pO1xuICByZXR1cm4gW3N0YXRlLCBzZXRTdGF0ZV07XG59XG5cbi8vIHNyYy91c2VMb2NhbFN0b3JhZ2VTdGF0ZS50c1xuZnVuY3Rpb24gZ2V0U3RhdGUoaW5pdGlhbFN0YXRlLCBzYXZlZFN0YXRlLCBzaG91bGRPdmVycmlkZSwgcmVzdG9yZVByb3BlcnRpZXMpIHtcbiAgaWYgKHNob3VsZE92ZXJyaWRlKSB7XG4gICAgY29uc3QgaW5pdGlhbFN0YXRlS2V5cyA9IE9iamVjdC5rZXlzKGluaXRpYWxTdGF0ZSk7XG4gICAgY29uc3Qgc2F2ZWRTdGF0ZUtleXMgPSBzYXZlZFN0YXRlID8gT2JqZWN0LmtleXMoc2F2ZWRTdGF0ZSkgOiBbXTtcbiAgICBjb25zdCByZXN0b3JlUHJvcGVydGllc0tleXMgPSByZXN0b3JlUHJvcGVydGllcyA/IE9iamVjdC5rZXlzKHJlc3RvcmVQcm9wZXJ0aWVzKSA6IFtdO1xuICAgIGlmICghWy4uLmluaXRpYWxTdGF0ZUtleXMsIC4uLnJlc3RvcmVQcm9wZXJ0aWVzS2V5c10uZXZlcnkoKGspID0+IHNhdmVkU3RhdGVLZXlzLmluY2x1ZGVzKGspKSkge1xuICAgICAgcmV0dXJuIHsgLi4uaW5pdGlhbFN0YXRlLCAuLi5yZXN0b3JlUHJvcGVydGllcyB9O1xuICAgIH1cbiAgICByZXR1cm4geyAuLi5zYXZlZFN0YXRlLCAuLi5yZXN0b3JlUHJvcGVydGllcyB9O1xuICB9XG4gIHJldHVybiB7IC4uLnNhdmVkU3RhdGUsIC4uLnJlc3RvcmVQcm9wZXJ0aWVzIH07XG59XG5mdW5jdGlvbiB1c2VMb2NhbFN0b3JhZ2VTdGF0ZShrZXksIGluaXRpYWxTdGF0ZSwgb3B0aW9ucykge1xuICBjb25zdCB7IG92ZXJyaWRlRGl2ZXJnZW50U2F2ZWRTdGF0ZSA9IGZhbHNlLCByZXNldFByb3BlcnRpZXMgfSA9IG9wdGlvbnMgfHwge307XG4gIGNvbnN0IFt2YWx1ZSwgc2V0VmFsdWUsIHJlbW92ZV0gPSB1c2VMb2NhbFN0b3JhZ2Uoa2V5LCBpbml0aWFsU3RhdGUpO1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVNldFN0YXRlKFxuICAgIGdldFN0YXRlKGluaXRpYWxTdGF0ZSwgdmFsdWUsIG92ZXJyaWRlRGl2ZXJnZW50U2F2ZWRTdGF0ZSwgcmVzZXRQcm9wZXJ0aWVzKVxuICApO1xuICB1c2VEZWVwQ29tcGFyZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0VmFsdWUoc3RhdGUpO1xuICB9LCBbc2V0VmFsdWUsIHN0YXRlXSk7XG4gIHJldHVybiBbc3RhdGUsIHNldFN0YXRlLCByZW1vdmVdO1xufVxuXG4vLyBzcmMvdXNlTG9jYXRpb24udHNcbmZ1bmN0aW9uIHVzZUxvY2F0aW9uKCkge1xuICBjb25zdCB7IGhhc2gsIGhvc3QsIGhvc3RuYW1lLCBocmVmLCBvcmlnaW4sIHBhdGhuYW1lLCBwb3J0LCBwcm90b2NvbCwgc2VhcmNoIH0gPSB3aW5kb3cubG9jYXRpb247XG4gIGNvbnN0IHF1ZXJ5ID0gc2VhcmNoID8gc2VhcmNoLnNsaWNlKDEpLnNwbGl0KFwiJlwiKS5yZWR1Y2UoKGFjYywgcGFpcikgPT4ge1xuICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IHBhaXIuc3BsaXQoXCI9XCIpO1xuICAgIGlmIChrZXkgJiYgdmFsdWUpIHtcbiAgICAgIGFjY1trZXldID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KSA6IHt9O1xuICByZXR1cm4geyBoYXNoLCBob3N0LCBob3N0bmFtZSwgaHJlZiwgb3JpZ2luLCBwYXRobmFtZSwgcG9ydCwgcHJvdG9jb2wsIHF1ZXJ5LCBzZWFyY2ggfTtcbn1cblxuLy8gc3JjL3VzZU1lYXN1cmUudHN4XG5pbXBvcnQgeyB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTcgfSBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL2RlZmF1bHRzLnRzXG52YXIgZGVmYXVsdEVsZW1lbnREaW1lbnNpb25zID0ge1xuICBhYnNvbHV0ZUhlaWdodDogMCxcbiAgYWJzb2x1dGVXaWR0aDogMCxcbiAgYm90dG9tOiAwLFxuICBoZWlnaHQ6IDAsXG4gIGxlZnQ6IDAsXG4gIHJpZ2h0OiAwLFxuICB0b3A6IDAsXG4gIHdpZHRoOiAwLFxuICB4OiAwLFxuICB5OiAwXG59O1xuXG4vLyBzcmMvdXNlUmVzaXplT2JzZXJ2ZXIudHNcbmltcG9ydCB7IHVzZU1lbW8gYXMgdXNlTWVtbzQsIHVzZVJlZiBhcyB1c2VSZWYxMSwgdXNlU3RhdGUgYXMgdXNlU3RhdGU2IH0gZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VSZXNpemVPYnNlcnZlcih0YXJnZXQsIGRlYm91bmNlID0gMCkge1xuICBjb25zdCBbZWxlbWVudCwgc2V0RWxlbWVudF0gPSB1c2VTdGF0ZTYoZ2V0RWxlbWVudCh0YXJnZXQpKTtcbiAgY29uc3QgW3ZhbHVlLCBzZXRWYWx1ZV0gPSB1c2VTdGF0ZTYoKTtcbiAgY29uc3QgdGltZW91dFJlZiA9IHVzZVJlZjExKG51bGwpO1xuICBjb25zdCBpc0ZpcnN0Q2FsbCA9IHVzZVJlZjExKHRydWUpO1xuICBjb25zdCBvYnNlcnZlciA9IHVzZU1lbW80KCgpID0+IHtcbiAgICBpZiAoIWNhblVzZURPTSgpKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIHJldHVybiBuZXcgd2luZG93LlJlc2l6ZU9ic2VydmVyKChlbnRyaWVzKSA9PiB7XG4gICAgICBpZiAoZGVib3VuY2UgJiYgIWlzRmlyc3RDYWxsLmN1cnJlbnQpIHtcbiAgICAgICAgaWYgKHRpbWVvdXRSZWYuY3VycmVudCkge1xuICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dFJlZi5jdXJyZW50KTtcbiAgICAgICAgfVxuICAgICAgICB0aW1lb3V0UmVmLmN1cnJlbnQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgc2V0VmFsdWUoZW50cmllc1swXSk7XG4gICAgICAgIH0sIGRlYm91bmNlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2V0VmFsdWUoZW50cmllc1swXSk7XG4gICAgICBpc0ZpcnN0Q2FsbC5jdXJyZW50ID0gZmFsc2U7XG4gICAgfSk7XG4gIH0sIFtkZWJvdW5jZV0pO1xuICB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBzZXRFbGVtZW50KGdldEVsZW1lbnQodGFyZ2V0KSk7XG4gIH0sIFt0YXJnZXRdKTtcbiAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFjYW5Vc2VET00oKSB8fCAhKG9ic2VydmVyIGluc3RhbmNlb2YgUmVzaXplT2JzZXJ2ZXIpKSB7XG4gICAgICByZXR1cm4gKCkgPT4gdm9pZCAwO1xuICAgIH1cbiAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgIHJldHVybiAoKSA9PiB2b2lkIDA7XG4gICAgfVxuICAgIG9ic2VydmVyLm9ic2VydmUoZWxlbWVudCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICB9O1xuICB9LCBbZWxlbWVudCwgb2JzZXJ2ZXJdKTtcbiAgcmV0dXJuIHZhbHVlO1xufVxuXG4vLyBzcmMvdXNlTWVhc3VyZS50c3hcbmZ1bmN0aW9uIHBhcnNlRmxvYXRWYWx1ZSh2YWx1ZSkge1xuICBjb25zdCBwYXJzZWQgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgcmV0dXJuIE51bWJlci5pc05hTihwYXJzZWQpID8gMCA6IHBhcnNlZDtcbn1cbmZ1bmN0aW9uIGdldEVsZW1lbnRNZWFzdXJlKGVsZW1lbnQpIHtcbiAgaWYgKCFjYW5Vc2VET00oKSB8fCAhZWxlbWVudCkge1xuICAgIHJldHVybiBkZWZhdWx0RWxlbWVudERpbWVuc2lvbnM7XG4gIH1cbiAgY29uc3QgeyBib3R0b20sIGhlaWdodCwgbGVmdCwgcmlnaHQsIHRvcCwgd2lkdGgsIHgsIHkgfSA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGNvbnN0IHtcbiAgICBib3JkZXJCb3R0b20sXG4gICAgYm9yZGVyTGVmdCxcbiAgICBib3JkZXJSaWdodCxcbiAgICBib3JkZXJUb3AsXG4gICAgcGFkZGluZ0JvdHRvbSxcbiAgICBwYWRkaW5nTGVmdCxcbiAgICBwYWRkaW5nUmlnaHQsXG4gICAgcGFkZGluZ1RvcFxuICB9ID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgcmV0dXJuIHtcbiAgICBhYnNvbHV0ZUhlaWdodDogaGVpZ2h0IC0gcGFyc2VGbG9hdFZhbHVlKHBhZGRpbmdUb3ApIC0gcGFyc2VGbG9hdFZhbHVlKHBhZGRpbmdCb3R0b20pIC0gcGFyc2VGbG9hdFZhbHVlKGJvcmRlclRvcCkgLSBwYXJzZUZsb2F0VmFsdWUoYm9yZGVyQm90dG9tKSxcbiAgICBhYnNvbHV0ZVdpZHRoOiB3aWR0aCAtIHBhcnNlRmxvYXRWYWx1ZShwYWRkaW5nTGVmdCkgLSBwYXJzZUZsb2F0VmFsdWUocGFkZGluZ1JpZ2h0KSAtIHBhcnNlRmxvYXRWYWx1ZShib3JkZXJMZWZ0KSAtIHBhcnNlRmxvYXRWYWx1ZShib3JkZXJSaWdodCksXG4gICAgYm90dG9tLFxuICAgIGhlaWdodCxcbiAgICBsZWZ0LFxuICAgIHJpZ2h0LFxuICAgIHRvcCxcbiAgICB3aWR0aCxcbiAgICB4LFxuICAgIHlcbiAgfTtcbn1cbmZ1bmN0aW9uIHVzZU1lYXN1cmUodGFyZ2V0LCBkZWJvdW5jZSA9IDApIHtcbiAgY29uc3QgW2VsZW1lbnQsIHNldEVsZW1lbnRdID0gdXNlU3RhdGU3KGdldEVsZW1lbnQodGFyZ2V0KSk7XG4gIGNvbnN0IFtkaW1lbnNpb25zLCBzZXREaW1lbnNpb25zXSA9IHVzZVN0YXRlNyhnZXRFbGVtZW50TWVhc3VyZShlbGVtZW50KSk7XG4gIGNvbnN0IGVudHJ5ID0gdXNlUmVzaXplT2JzZXJ2ZXIoZWxlbWVudCwgZGVib3VuY2UpO1xuICB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBuZXh0RWxlbWVudCA9IGdldEVsZW1lbnQodGFyZ2V0KTtcbiAgICBzZXRFbGVtZW50KG5leHRFbGVtZW50KTtcbiAgICBzZXREaW1lbnNpb25zKGdldEVsZW1lbnRNZWFzdXJlKG5leHRFbGVtZW50KSk7XG4gIH0sIFt0YXJnZXRdKTtcbiAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFlbnRyeSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7IGJvdHRvbSwgaGVpZ2h0LCBsZWZ0LCByaWdodCwgdG9wLCB3aWR0aCwgeCwgeSB9ID0gZW50cnkuY29udGVudFJlY3Q7XG4gICAgY29uc3QgeyBibG9ja1NpemUsIGlubGluZVNpemUgfSA9IGVudHJ5LmJvcmRlckJveFNpemVbMF07XG4gICAgc2V0RGltZW5zaW9ucyh7XG4gICAgICBhYnNvbHV0ZUhlaWdodDogYmxvY2tTaXplLFxuICAgICAgYWJzb2x1dGVXaWR0aDogaW5saW5lU2l6ZSxcbiAgICAgIGJvdHRvbSxcbiAgICAgIGhlaWdodCxcbiAgICAgIGxlZnQsXG4gICAgICByaWdodCxcbiAgICAgIHRvcCxcbiAgICAgIHdpZHRoLFxuICAgICAgeCxcbiAgICAgIHlcbiAgICB9KTtcbiAgfSwgW2VudHJ5XSk7XG4gIHJldHVybiBkaW1lbnNpb25zO1xufVxuXG4vLyBzcmMvdXNlTWVkaWFRdWVyeS50c1xuaW1wb3J0IHsgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDEyLCB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTggfSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZU1lZGlhUXVlcnkoaW5wdXQpIHtcbiAgY29uc3QgZ2V0TWF0Y2hlcyA9IChxdWVyeSkgPT4ge1xuICAgIGlmICghY2FuVXNlRE9NKCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHdpbmRvdy5tYXRjaE1lZGlhKHF1ZXJ5KS5tYXRjaGVzO1xuICB9O1xuICBjb25zdCBbbWF0Y2hlcywgc2V0TWF0Y2hlc10gPSB1c2VTdGF0ZTgoZ2V0TWF0Y2hlcyhpbnB1dCkpO1xuICBmdW5jdGlvbiBoYW5kbGVDaGFuZ2UoKSB7XG4gICAgc2V0TWF0Y2hlcyhnZXRNYXRjaGVzKGlucHV0KSk7XG4gIH1cbiAgdXNlRWZmZWN0MTIoKCkgPT4ge1xuICAgIGNvbnN0IG1hdGNoTWVkaWEgPSB3aW5kb3cubWF0Y2hNZWRpYShpbnB1dCk7XG4gICAgaGFuZGxlQ2hhbmdlKCk7XG4gICAgdHJ5IHtcbiAgICAgIG1hdGNoTWVkaWEuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBoYW5kbGVDaGFuZ2UpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgbWF0Y2hNZWRpYS5hZGRMaXN0ZW5lcihoYW5kbGVDaGFuZ2UpO1xuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbWF0Y2hNZWRpYS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGhhbmRsZUNoYW5nZSk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgbWF0Y2hNZWRpYS5yZW1vdmVMaXN0ZW5lcihoYW5kbGVDaGFuZ2UpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtpbnB1dF0pO1xuICByZXR1cm4gbWF0Y2hlcztcbn1cblxuLy8gc3JjL3VzZU1lcmdlUmVmcy50c3hcbmltcG9ydCB7IHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrNiB9IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlTWVyZ2VSZWZzKC4uLnJlZnMpIHtcbiAgcmV0dXJuIHVzZUNhbGxiYWNrNihcbiAgICAodmFsdWUpID0+IHtcbiAgICAgIGZvciAoY29uc3QgcmVmIG9mIHJlZnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiByZWYgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIHJlZih2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVmICYmIHR5cGVvZiByZWYgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICByZWYuY3VycmVudCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gICAgcmVmc1xuICApO1xufVxuXG4vLyBzcmMvdXNlTW91bnQudHNcbmZ1bmN0aW9uIHVzZU1vdW50KGZuKSB7XG4gIHVzZUVmZmVjdE9uY2UoKCkgPT4ge1xuICAgIGZuKCk7XG4gIH0pO1xufVxuXG4vLyBzcmMvdXNlUHJldmlvdXMudHNcbmltcG9ydCB7IHVzZUVmZmVjdCBhcyB1c2VFZmZlY3QxMywgdXNlUmVmIGFzIHVzZVJlZjEyIH0gZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VQcmV2aW91cyhzdGF0ZSkge1xuICBjb25zdCByZWYgPSB1c2VSZWYxMigpO1xuICB1c2VFZmZlY3QxMygoKSA9PiB7XG4gICAgcmVmLmN1cnJlbnQgPSBzdGF0ZTtcbiAgfSk7XG4gIHJldHVybiByZWYuY3VycmVudDtcbn1cblxuLy8gc3JjL3VzZVJlbmRlckNvdW50LnRzeFxuaW1wb3J0IHsgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDE0LCB1c2VSZWYgYXMgdXNlUmVmMTMgfSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZVJlbmRlckNvdW50KG5hbWUpIHtcbiAgY29uc3QgY291bnQgPSB1c2VSZWYxMygxKTtcbiAgdXNlRWZmZWN0MTQoKCkgPT4ge1xuICAgIGNvdW50LmN1cnJlbnQgKz0gMTtcbiAgfSk7XG4gIGNvbnNvbGUubG9nKFxuICAgIGAlYyR7bmFtZSB8fCBcIlJlbmRlckNvdW50XCJ9OiAlYyR7Y291bnQuY3VycmVudH1gLFxuICAgIFwiZm9udC1zaXplOiAxNHB4OyAgZm9udC13ZWlnaHQ6IGJvbGQ7XCIsXG4gICAgXCJjb2xvcjogIzk5OTsgZm9udC1zaXplOiAxNHB4O1wiXG4gICk7XG4gIHJldHVybiBjb3VudC5jdXJyZW50O1xufVxuXG4vLyBzcmMvdXNlUmVzcG9uc2l2ZS50c3hcbmltcG9ydCB7IHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrNywgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDE1LCB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTkgfSBmcm9tIFwicmVhY3RcIjtcbnZhciBkZWZhdWx0QnJlYWtwb2ludHMgPSB7IHhzOiAwLCBzbTogNDAwLCBtZDogNzY4LCBsZzogMTAyNCwgeGw6IDEyODAgfTtcbmZ1bmN0aW9uIHVzZVJlc3BvbnNpdmVCYXNlKGJyZWFrcG9pbnRzLCBpbml0aWFsV2lkdGggPSBJbmZpbml0eSwgaW5pdGlhbEhlaWdodCA9IEluZmluaXR5KSB7XG4gIGNvbnN0IHNpemVzID0gT2JqZWN0LmVudHJpZXMoYnJlYWtwb2ludHMpLnNvcnQoKFssIGFTaXplXSwgWywgYlNpemVdKSA9PiBiU2l6ZSAtIGFTaXplKTtcbiAgY29uc3Qgc21hbGxlc3RCcmVha3BvaW50ID0gc2l6ZXNbc2l6ZXMubGVuZ3RoIC0gMV07XG4gIGlmIChzbWFsbGVzdEJyZWFrcG9pbnRbMV0gIT09IDApIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICBjb25zb2xlLndhcm4oYFRoZSBcIiR7c21hbGxlc3RCcmVha3BvaW50WzBdfVwiIGJyZWFrcG9pbnQgc2hvdWxkIGJlIDBgKTtcbiAgICB9XG4gICAgc21hbGxlc3RCcmVha3BvaW50WzFdID0gMDtcbiAgfVxuICBjb25zdCBnZXRTY3JlZW4gPSB1c2VDYWxsYmFjazcoKCkgPT4ge1xuICAgIGNvbnN0IGhlaWdodCA9IGNhblVzZURPTSgpID8gd2luZG93LmlubmVySGVpZ2h0IDogaW5pdGlhbEhlaWdodDtcbiAgICBjb25zdCB3aWR0aCA9IGNhblVzZURPTSgpID8gd2luZG93LmlubmVyV2lkdGggOiBpbml0aWFsV2lkdGg7XG4gICAgY29uc3Qgc2l6ZSA9IHNpemVzLmZpbmQoKFssIHNdKSA9PiBzIDw9IHdpZHRoKSB8fCBzaXplc1swXTtcbiAgICBjb25zdCBvcmllbnRhdGlvbiA9IHdpZHRoID4gaGVpZ2h0ID8gXCJsYW5kc2NhcGVcIiA6IFwicG9ydHJhaXRcIjtcbiAgICByZXR1cm4ge1xuICAgICAgYmV0d2VlbihtaW4sIG1heCwgYW5kT3JpZW50YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHdpZHRoID49IGJyZWFrcG9pbnRzW21pbl0gJiYgd2lkdGggPCBicmVha3BvaW50c1ttYXhdICYmICghYW5kT3JpZW50YXRpb24gfHwgYW5kT3JpZW50YXRpb24gPT09IG9yaWVudGF0aW9uKTtcbiAgICAgIH0sXG4gICAgICBtaW4oYnJlYWtwb2ludCwgYW5kT3JpZW50YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHdpZHRoID49IGJyZWFrcG9pbnRzW2JyZWFrcG9pbnRdICYmICghYW5kT3JpZW50YXRpb24gfHwgYW5kT3JpZW50YXRpb24gPT09IG9yaWVudGF0aW9uKTtcbiAgICAgIH0sXG4gICAgICBtYXgoYnJlYWtwb2ludCwgYW5kT3JpZW50YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHdpZHRoIDwgYnJlYWtwb2ludHNbYnJlYWtwb2ludF0gJiYgKCFhbmRPcmllbnRhdGlvbiB8fCBhbmRPcmllbnRhdGlvbiA9PT0gb3JpZW50YXRpb24pO1xuICAgICAgfSxcbiAgICAgIG9yaWVudGF0aW9uLFxuICAgICAgc2l6ZTogc2l6ZVswXVxuICAgIH07XG4gIH0sIFticmVha3BvaW50cywgaW5pdGlhbEhlaWdodCwgaW5pdGlhbFdpZHRoLCBzaXplc10pO1xuICBjb25zdCBbc2NyZWVuLCBzZXRTY3JlZW5dID0gdXNlU3RhdGU5KGdldFNjcmVlbigpKTtcbiAgdXNlRWZmZWN0MTUoKCkgPT4ge1xuICAgIGNvbnN0IG9uUmVzaXplID0gKCkgPT4ge1xuICAgICAgY29uc3QgY3VycmVudCA9IGdldFNjcmVlbigpO1xuICAgICAgaWYgKGN1cnJlbnQuc2l6ZSAhPT0gc2NyZWVuLnNpemUgfHwgY3VycmVudC5vcmllbnRhdGlvbiAhPT0gc2NyZWVuLm9yaWVudGF0aW9uKSB7XG4gICAgICAgIHNldFNjcmVlbihjdXJyZW50KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIG9uKHdpbmRvdywgXCJyZXNpemVcIiwgb25SZXNpemUpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBvZmYod2luZG93LCBcInJlc2l6ZVwiLCBvblJlc2l6ZSk7XG4gICAgfTtcbiAgfSwgW2dldFNjcmVlbiwgc2NyZWVuLCBzZXRTY3JlZW5dKTtcbiAgcmV0dXJuIHNjcmVlbjtcbn1cbmZ1bmN0aW9uIHVzZVJlc3BvbnNpdmUoYnJlYWtwb2ludHMsIGluaXRpYWxXaWR0aCwgaW5pdGlhbEhlaWdodCkge1xuICByZXR1cm4gdXNlUmVzcG9uc2l2ZUJhc2UoYnJlYWtwb2ludHMgfHwgZGVmYXVsdEJyZWFrcG9pbnRzLCBpbml0aWFsV2lkdGgsIGluaXRpYWxIZWlnaHQpO1xufVxuXG4vLyBzcmMvdXNlU2NyaXB0LnRzeFxuaW1wb3J0IHsgdXNlQ2FsbGJhY2sgYXMgdXNlQ2FsbGJhY2s4LCB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0MTYsIHVzZU1lbW8gYXMgdXNlTWVtbzUsIHVzZVJlZiBhcyB1c2VSZWYxNCwgdXNlU3RhdGUgYXMgdXNlU3RhdGUxMCB9IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlU2NyaXB0KHNyYywgaWRPck9wdGlvbnMgPSB7fSkge1xuICBjb25zdCBvcHRpb25zID0gdXNlTWVtbzUoXG4gICAgKCkgPT4gaXNTdHJpbmcoaWRPck9wdGlvbnMpID8geyBpZDogaWRPck9wdGlvbnMgfSA6IGlkT3JPcHRpb25zLFxuICAgIFtpZE9yT3B0aW9uc11cbiAgKTtcbiAgY29uc3Qgc2NyaXB0ID0gdXNlUmVmMTQoKTtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZTEwKHtcbiAgICBsb2FkZWQ6IGZhbHNlLFxuICAgIGVycm9yOiBmYWxzZVxuICB9KTtcbiAgY29uc3Qgb25Mb2FkID0gdXNlQ2FsbGJhY2s4KCgpID0+IHtcbiAgICBzZXRTdGF0ZSh7XG4gICAgICBsb2FkZWQ6IHRydWUsXG4gICAgICBlcnJvcjogZmFsc2VcbiAgICB9KTtcbiAgfSwgW10pO1xuICBjb25zdCBvbkVycm9yID0gdXNlQ2FsbGJhY2s4KCgpID0+IHtcbiAgICBpZiAoc2NyaXB0LmN1cnJlbnQpIHtcbiAgICAgIHNjcmlwdC5jdXJyZW50LnJlbW92ZSgpO1xuICAgIH1cbiAgICBzZXRTdGF0ZSh7XG4gICAgICBsb2FkZWQ6IGZhbHNlLFxuICAgICAgZXJyb3I6IHRydWVcbiAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QxNihcbiAgICAoKSA9PiB7XG4gICAgICBpZiAoIWNhblVzZURPTSgpIHx8IHNjcmlwdC5jdXJyZW50KSB7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICB9XG4gICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgIGVsZW1lbnQuYXN5bmMgPSBvcHRpb25zLmFzeW5jID8/IHRydWU7XG4gICAgICBlbGVtZW50LmRlZmVyID0gb3B0aW9ucy5kZWZlciA/PyBmYWxzZTtcbiAgICAgIGVsZW1lbnQudHlwZSA9IG9wdGlvbnMudHlwZSB8fCBcInRleHQvamF2YXNjcmlwdFwiO1xuICAgICAgZWxlbWVudC5pZCA9IG9wdGlvbnMuaWQgfHwgc3JjO1xuICAgICAgZWxlbWVudC5zcmMgPSBzcmM7XG4gICAgICBzY3JpcHQuY3VycmVudCA9IGVsZW1lbnQ7XG4gICAgICBjb25zdCB7IGN1cnJlbnQgfSA9IHNjcmlwdDtcbiAgICAgIG9uKGN1cnJlbnQsIFwibG9hZFwiLCBvbkxvYWQpO1xuICAgICAgb24oY3VycmVudCwgXCJlcnJvclwiLCBvbkVycm9yKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY3VycmVudCk7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBvZmYoY3VycmVudCwgXCJsb2FkXCIsIG9uTG9hZCk7XG4gICAgICAgIG9mZihjdXJyZW50LCBcImVycm9yXCIsIG9uRXJyb3IpO1xuICAgICAgfTtcbiAgICB9LFxuICAgIFtvbkVycm9yLCBvbkxvYWQsIG9wdGlvbnMsIHNyY11cbiAgICAvLyBPbmx5IHJlLXJ1biBlZmZlY3QgaWYgc2NyaXB0IHNyYyBjaGFuZ2VzXG4gICk7XG4gIHJldHVybiBbc3RhdGUubG9hZGVkLCBzdGF0ZS5lcnJvcl07XG59XG5cbi8vIHNyYy91c2VTaW5nbGV0b24udHN4XG5pbXBvcnQgeyB1c2VSZWYgYXMgdXNlUmVmMTUgfSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZVNpbmdsZXRvbihjYWxsYmFjaykge1xuICBjb25zdCBoYXNCZWVuQ2FsbGVkID0gdXNlUmVmMTUoZmFsc2UpO1xuICBpZiAoaGFzQmVlbkNhbGxlZC5jdXJyZW50KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNhbGxiYWNrKCk7XG4gIGhhc0JlZW5DYWxsZWQuY3VycmVudCA9IHRydWU7XG59XG5cbi8vIHNyYy91c2VUaW1lb3V0LnRzXG5pbXBvcnQgeyB1c2VDYWxsYmFjayBhcyB1c2VDYWxsYmFjazksIHVzZUVmZmVjdCBhcyB1c2VFZmZlY3QxNywgdXNlUmVmIGFzIHVzZVJlZjE2IH0gZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VUaW1lb3V0KGNhbGxiYWNrLCBkZWxheU1zID0gMCkge1xuICBjb25zdCBzdGF0dXMgPSB1c2VSZWYxNihcInBlbmRpbmdcIik7XG4gIGNvbnN0IHRpbWVvdXQgPSB1c2VSZWYxNigpO1xuICBjb25zdCBzYXZlZENhbGxiYWNrID0gdXNlUmVmMTYoY2FsbGJhY2spO1xuICBjb25zdCBjbGVhciA9IHVzZUNhbGxiYWNrOSgoKSA9PiB7XG4gICAgc3RhdHVzLmN1cnJlbnQgPSBcImNhbmNlbGxlZFwiO1xuICAgIHRpbWVvdXQuY3VycmVudCAmJiBjbGVhclRpbWVvdXQodGltZW91dC5jdXJyZW50KTtcbiAgfSwgW10pO1xuICBjb25zdCBzZXQgPSB1c2VDYWxsYmFjazkoKCkgPT4ge1xuICAgIHN0YXR1cy5jdXJyZW50ID0gXCJwZW5kaW5nXCI7XG4gICAgdGltZW91dC5jdXJyZW50ICYmIGNsZWFyVGltZW91dCh0aW1lb3V0LmN1cnJlbnQpO1xuICAgIHRpbWVvdXQuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc3RhdHVzLmN1cnJlbnQgPSBcImNvbXBsZXRlZFwiO1xuICAgICAgc2F2ZWRDYWxsYmFjay5jdXJyZW50KCk7XG4gICAgfSwgZGVsYXlNcyk7XG4gIH0sIFtkZWxheU1zXSk7XG4gIGNvbnN0IGdldFN0YXR1cyA9IHVzZUNhbGxiYWNrOSgoKSA9PiBzdGF0dXMuY3VycmVudCwgW10pO1xuICB1c2VFZmZlY3QxNygoKSA9PiB7XG4gICAgc2F2ZWRDYWxsYmFjay5jdXJyZW50ID0gY2FsbGJhY2s7XG4gIH0sIFtjYWxsYmFja10pO1xuICB1c2VFZmZlY3QxNygoKSA9PiB7XG4gICAgc2V0KCk7XG4gICAgcmV0dXJuIGNsZWFyO1xuICB9LCBbc2V0LCBjbGVhcl0pO1xuICByZXR1cm4geyBjYW5jZWw6IGNsZWFyLCBnZXRTdGF0dXMsIHJlc2V0OiBzZXQgfTtcbn1cblxuLy8gc3JjL3VzZVRocm90dGxlLnRzXG5pbXBvcnQgeyB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0MTgsIHVzZVJlZiBhcyB1c2VSZWYxNywgdXNlU3RhdGUgYXMgdXNlU3RhdGUxMSB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvdXNlVW5tb3VudC50c1xuZnVuY3Rpb24gdXNlVW5tb3VudChmbikge1xuICBjb25zdCB1bm1vdW50Rm4gPSB1c2VMYXRlc3QoZm4pO1xuICB1c2VFZmZlY3RPbmNlKCgpID0+ICgpID0+IHVubW91bnRGbi5jdXJyZW50KCkpO1xufVxuXG4vLyBzcmMvdXNlVGhyb3R0bGUudHNcbmZ1bmN0aW9uIHVzZVRocm90dGxlKGNhbGxiYWNrLCBkZWxheU1zID0gNTAwLCB0cmFpbGluZyA9IGZhbHNlKSB7XG4gIGNvbnN0IFtub3csIHNldE5vd10gPSB1c2VTdGF0ZTExKDApO1xuICBjb25zdCBjYWxsYmFja1JlZiA9IHVzZVJlZjE3KGNhbGxiYWNrKTtcbiAgY29uc3QgaGFzUGVuZGluZ0NhbGwgPSB1c2VSZWYxNyhmYWxzZSk7XG4gIGNvbnN0IHRpbWVyID0gdXNlUmVmMTcoKTtcbiAgdXNlRWZmZWN0MTgoKCkgPT4ge1xuICAgIGNhbGxiYWNrUmVmLmN1cnJlbnQgPSBjYWxsYmFjaztcbiAgfSwgW2NhbGxiYWNrXSk7XG4gIHVzZUVmZmVjdDE4KCgpID0+IHtcbiAgICBpZiAoIW5vdykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXRpbWVyLmN1cnJlbnQpIHtcbiAgICAgIGNhbGxiYWNrUmVmLmN1cnJlbnQoKTtcbiAgICAgIGNvbnN0IHRpbWVyQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgIGlmIChoYXNQZW5kaW5nQ2FsbC5jdXJyZW50KSB7XG4gICAgICAgICAgaGFzUGVuZGluZ0NhbGwuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICAgIGlmICh0cmFpbGluZykge1xuICAgICAgICAgICAgY2FsbGJhY2tSZWYuY3VycmVudCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aW1lci5jdXJyZW50ID0gdm9pZCAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRpbWVyLmN1cnJlbnQgPSB2b2lkIDA7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB0aW1lci5jdXJyZW50ID0gd2luZG93LnNldFRpbWVvdXQodGltZXJDYWxsYmFjaywgZGVsYXlNcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhhc1BlbmRpbmdDYWxsLmN1cnJlbnQgPSB0cnVlO1xuICAgIH1cbiAgfSwgW2RlbGF5TXMsIG5vdywgdHJhaWxpbmddKTtcbiAgdXNlVW5tb3VudCgoKSA9PiB7XG4gICAgd2luZG93LmNsZWFyVGltZW91dCh0aW1lci5jdXJyZW50KTtcbiAgICB0aW1lci5jdXJyZW50ID0gdm9pZCAwO1xuICB9KTtcbiAgcmV0dXJuICgpID0+IHNldE5vdyhEYXRlLm5vdygpKTtcbn1cblxuLy8gc3JjL3VzZVRocm90dGxlVmFsdWUudHNcbmltcG9ydCB7IHVzZUVmZmVjdCBhcyB1c2VFZmZlY3QxOSwgdXNlUmVmIGFzIHVzZVJlZjE4LCB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTEyIH0gZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VUaHJvdHRsZVZhbHVlKHZhbHVlLCBkZWxheU1zKSB7XG4gIGNvbnN0IFt0aHJvdHRsZWRWYWx1ZSwgc2V0VGhyb3R0bGVkVmFsdWVdID0gdXNlU3RhdGUxMih2YWx1ZSk7XG4gIGNvbnN0IGhhc05leHRWYWx1ZSA9IHVzZVJlZjE4KGZhbHNlKTtcbiAgY29uc3QgbmV4dFZhbHVlID0gdXNlUmVmMTgobnVsbCk7XG4gIGNvbnN0IHRpbWVyID0gdXNlUmVmMTgoKTtcbiAgdXNlRWZmZWN0MTkoKCkgPT4ge1xuICAgIGlmICghdGltZXIuY3VycmVudCkge1xuICAgICAgc2V0VGhyb3R0bGVkVmFsdWUodmFsdWUpO1xuICAgICAgY29uc3QgdGltZW91dENhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgICBpZiAoaGFzTmV4dFZhbHVlLmN1cnJlbnQpIHtcbiAgICAgICAgICBoYXNOZXh0VmFsdWUuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICAgIHNldFRocm90dGxlZFZhbHVlKG5leHRWYWx1ZS5jdXJyZW50KTtcbiAgICAgICAgICB0aW1lci5jdXJyZW50ID0gd2luZG93LnNldFRpbWVvdXQodGltZW91dENhbGxiYWNrLCBkZWxheU1zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aW1lci5jdXJyZW50ID0gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgdGltZXIuY3VycmVudCA9IHdpbmRvdy5zZXRUaW1lb3V0KHRpbWVvdXRDYWxsYmFjaywgZGVsYXlNcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhhc05leHRWYWx1ZS5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgIG5leHRWYWx1ZS5jdXJyZW50ID0gdmFsdWU7XG4gICAgfVxuICB9LCBbZGVsYXlNcywgdmFsdWVdKTtcbiAgdXNlVW5tb3VudCgoKSA9PiB7XG4gICAgd2luZG93LmNsZWFyVGltZW91dCh0aW1lci5jdXJyZW50KTtcbiAgICB0aW1lci5jdXJyZW50ID0gdm9pZCAwO1xuICB9KTtcbiAgcmV0dXJuIHRocm90dGxlZFZhbHVlO1xufVxuXG4vLyBzcmMvdXNlVG9nZ2xlLnRzXG5pbXBvcnQgeyB1c2VDYWxsYmFjayBhcyB1c2VDYWxsYmFjazEwLCB1c2VNZW1vIGFzIHVzZU1lbW82LCB1c2VSZWR1Y2VyIH0gZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VUb2dnbGUoaW5pdGlhbFZhbHVlID0gdHJ1ZSkge1xuICBjb25zdCBbdmFsdWUsIHRvZ2dsZV0gPSB1c2VSZWR1Y2VyKFxuICAgIChzdGF0ZSwgbmV4dFZhbHVlKSA9PiB0eXBlb2YgbmV4dFZhbHVlID09PSBcImJvb2xlYW5cIiA/IG5leHRWYWx1ZSA6ICFzdGF0ZSxcbiAgICBpbml0aWFsVmFsdWVcbiAgKTtcbiAgY29uc3QgdG9nZ2xlT24gPSB1c2VDYWxsYmFjazEwKCgpID0+IHRvZ2dsZSh0cnVlKSwgW10pO1xuICBjb25zdCB0b2dnbGVPZmYgPSB1c2VDYWxsYmFjazEwKCgpID0+IHRvZ2dsZShmYWxzZSksIFtdKTtcbiAgcmV0dXJuIHVzZU1lbW82KCgpID0+IFt2YWx1ZSwgeyB0b2dnbGUsIHRvZ2dsZU9uLCB0b2dnbGVPZmYgfV0sIFt2YWx1ZSwgdG9nZ2xlT24sIHRvZ2dsZU9mZl0pO1xufVxuXG4vLyBzcmMvdXNlVXBkYXRlLnRzXG5pbXBvcnQgeyB1c2VSZWR1Y2VyIGFzIHVzZVJlZHVjZXIyIH0gZnJvbSBcInJlYWN0XCI7XG52YXIgdXBkYXRlUmVkdWNlciA9IChudW1iZXIpID0+IChudW1iZXIgKyAxKSAlIDFlNjtcbmZ1bmN0aW9uIHVzZVVwZGF0ZSgpIHtcbiAgY29uc3QgWywgdXBkYXRlXSA9IHVzZVJlZHVjZXIyKHVwZGF0ZVJlZHVjZXIsIDApO1xuICByZXR1cm4gdXBkYXRlO1xufVxuXG4vLyBzcmMvdXNlVXBkYXRlRWZmZWN0LnRzXG5pbXBvcnQgeyB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0MjAgfSBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIHVzZVVwZGF0ZUVmZmVjdChlZmZlY3QsIGRlcHMpIHtcbiAgY29uc3QgaXNGaXJzdE1vdW50ID0gdXNlSXNGaXJzdE1vdW50KCk7XG4gIHVzZUVmZmVjdDIwKCgpID0+IHtcbiAgICBpZiAoIWlzRmlyc3RNb3VudCkge1xuICAgICAgcmV0dXJuIGVmZmVjdCgpO1xuICAgIH1cbiAgICByZXR1cm4gdm9pZCAwO1xuICB9LCBkZXBzKTtcbn1cblxuLy8gc3JjL3VzZVdoeURpZFlvdVVwZGF0ZS50c3hcbmltcG9ydCB7IHVzZUVmZmVjdCBhcyB1c2VFZmZlY3QyMSwgdXNlUmVmIGFzIHVzZVJlZjE5LCB1c2VTdGF0ZSBhcyB1c2VTdGF0ZTEzIH0gZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiB1c2VXaHlEaWRZb3VVcGRhdGUocHJvcHMsIG5hbWVPck9wdGlvbnMgPSB7fSkge1xuICBjb25zdCBbY2hhbmdlcywgc2V0Q2hhbmdlc10gPSB1c2VTdGF0ZTEzKHt9KTtcbiAgY29uc3QgcHJldmlvdXNQcm9wcyA9IHVzZVJlZjE5KCk7XG4gIGNvbnN0IHsgbmFtZSwgc2tpcExvZyA9IGZhbHNlIH0gPSBpc1N0cmluZyhuYW1lT3JPcHRpb25zKSA/IHsgbmFtZTogbmFtZU9yT3B0aW9ucyB9IDogbmFtZU9yT3B0aW9ucztcbiAgdXNlRWZmZWN0MjEoKCkgPT4ge1xuICAgIGNvbnN0IHsgY3VycmVudCB9ID0gcHJldmlvdXNQcm9wcztcbiAgICBzZXRDaGFuZ2VzKHt9KTtcbiAgICBpZiAoY3VycmVudCkge1xuICAgICAgY29uc3QgYWxsS2V5cyA9IE9iamVjdC5rZXlzKHsgLi4uY3VycmVudCwgLi4ucHJvcHMgfSk7XG4gICAgICBjb25zdCBjaGFuZ2VzT2JqZWN0ID0ge307XG4gICAgICBhbGxLZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICBpZiAoY3VycmVudFtrZXldICE9PSBwcm9wc1trZXldKSB7XG4gICAgICAgICAgY2hhbmdlc09iamVjdFtrZXldID0ge1xuICAgICAgICAgICAgZnJvbTogY3VycmVudFtrZXldLFxuICAgICAgICAgICAgdG86IHByb3BzW2tleV1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChPYmplY3Qua2V5cyhjaGFuZ2VzT2JqZWN0KS5sZW5ndGgpIHtcbiAgICAgICAgc2V0Q2hhbmdlcyhjaGFuZ2VzT2JqZWN0KTtcbiAgICAgICAgaWYgKCFza2lwTG9nKSB7XG4gICAgICAgICAgY29uc3QgbmFtZVRva2VuID0gbmFtZSA/IGA6ICR7bmFtZX1gIDogXCJcIjtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW3doeS1kaWQteW91LXVwZGF0ZSR7bmFtZVRva2VufV1gLCBjaGFuZ2VzT2JqZWN0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBwcmV2aW91c1Byb3BzLmN1cnJlbnQgPSBwcm9wcztcbiAgfSwgW25hbWUsIHByb3BzLCBza2lwTG9nXSk7XG4gIHJldHVybiBPYmplY3Qua2V5cyhjaGFuZ2VzKS5sZW5ndGggPyBjaGFuZ2VzIDogZmFsc2U7XG59XG5cbi8vIHNyYy91c2VXaW5kb3dTaXplLnRzXG5pbXBvcnQgeyB1c2VFZmZlY3QgYXMgdXNlRWZmZWN0MjIsIHVzZVJlZiBhcyB1c2VSZWYyMCwgdXNlU3RhdGUgYXMgdXNlU3RhdGUxNCB9IGZyb20gXCJyZWFjdFwiO1xuZnVuY3Rpb24gdXNlV2luZG93U2l6ZShkZWJvdW5jZSA9IDApIHtcbiAgY29uc3QgW3NpemUsIHNldFNpemVdID0gdXNlU3RhdGUxNCh7XG4gICAgaGVpZ2h0OiBjYW5Vc2VET00oKSA/IHdpbmRvdy5pbm5lckhlaWdodCA6IDAsXG4gICAgd2lkdGg6IGNhblVzZURPTSgpID8gd2luZG93LmlubmVyV2lkdGggOiAwXG4gIH0pO1xuICBjb25zdCB0aW1lb3V0UmVmID0gdXNlUmVmMjAoMCk7XG4gIGNvbnN0IGhhbmRsZVJlc2l6ZSA9IHVzZVJlZjIwKCgpID0+IHtcbiAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXRSZWYuY3VycmVudCk7XG4gICAgdGltZW91dFJlZi5jdXJyZW50ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc2V0U2l6ZSh7XG4gICAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCxcbiAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHRcbiAgICAgIH0pO1xuICAgIH0sIGRlYm91bmNlKTtcbiAgfSk7XG4gIHVzZUVmZmVjdDIyKCgpID0+IHtcbiAgICBpZiAoIWNhblVzZURPTSgpKSB7XG4gICAgICByZXR1cm4gKCkgPT4gdm9pZCAwO1xuICAgIH1cbiAgICBjb25zdCBnZXRTaXplID0gaGFuZGxlUmVzaXplLmN1cnJlbnQ7XG4gICAgc2V0U2l6ZSh7XG4gICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCxcbiAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aFxuICAgIH0pO1xuICAgIG9uKHdpbmRvdywgXCJyZXNpemVcIiwgZ2V0U2l6ZSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIG9mZih3aW5kb3csIFwicmVzaXplXCIsIGdldFNpemUpO1xuICAgIH07XG4gIH0sIFtdKTtcbiAgcmV0dXJuIHNpemU7XG59XG5leHBvcnQge1xuICBVU0VfRkVUQ0hfU1RBVFVTLFxuICB1c2VDbGlja091dHNpZGUsXG4gIHVzZURlYm91bmNlLFxuICB1c2VEZWVwQ29tcGFyZUVmZmVjdCxcbiAgdXNlRWZmZWN0T25jZSxcbiAgdXNlRmV0Y2gsXG4gIHVzZUludGVyc2VjdGlvbk9ic2VydmVyLFxuICB1c2VJbnRlcnZhbCxcbiAgdXNlSXNGaXJzdE1vdW50LFxuICB1c2VJc01vdW50ZWQsXG4gIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QsXG4gIHVzZUxhdGVzdCxcbiAgdXNlTGlmZWN5Y2xlcyxcbiAgdXNlTG9jYWxTdG9yYWdlLFxuICB1c2VMb2NhbFN0b3JhZ2VTdGF0ZSxcbiAgdXNlTG9jYXRpb24sXG4gIHVzZU1lYXN1cmUsXG4gIHVzZU1lZGlhUXVlcnksXG4gIHVzZU1lcmdlUmVmcyxcbiAgdXNlTW91bnQsXG4gIHVzZVByZXZpb3VzLFxuICB1c2VSZW5kZXJDb3VudCxcbiAgdXNlUmVzaXplT2JzZXJ2ZXIsXG4gIHVzZVJlc3BvbnNpdmUsXG4gIHVzZVNjcmlwdCxcbiAgdXNlU2V0U3RhdGUsXG4gIHVzZVNpbmdsZXRvbixcbiAgdXNlU3RhYmxlVmFsdWUsXG4gIHVzZVRocm90dGxlLFxuICB1c2VUaHJvdHRsZVZhbHVlLFxuICB1c2VUaW1lb3V0LFxuICB1c2VUb2dnbGUsXG4gIHVzZVVubW91bnQsXG4gIHVzZVVwZGF0ZSxcbiAgdXNlVXBkYXRlRWZmZWN0LFxuICB1c2VXaHlEaWRZb3VVcGRhdGUsXG4gIHVzZVdpbmRvd1NpemVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@gilbarbara+hooks@0.8.2_react@19.1.1/node_modules/@gilbarbara/hooks/dist/index.mjs\n");

/***/ })

};
;